<?php
 goto S0x_8; J6ozM: $server = trim($_POST["\x73\x65\x72\x76\x65\162"]); goto heJXb; bFk0p: $server["\165\160\x6c\x6f\141\x64"] = strtolower($server["\x75\x70\154\x6f\x61\x64"]); goto xNEhq; tQi4q: if (!(version_compare(PHP_VERSION, "\x35\56\x33\x2e\x30") == -1)) { goto m8TsN; } goto AfbyC; mdThY: rdoY5: goto s1JXH; dVrGG: XnZWp: goto pBPHe; uKkGM: if (!($finished === true)) { goto qeMW4; } goto O8w_d; Y952X: $chunk_num = max(1, intval($_POST["\143\150\165\x6e\x6b"])); goto nJ0Jn; Cm1QF: $db_prefix = trim($_POST["\x70\x72\x65\x66\151\x78"]); goto aB_4d; jZR1Y: we7_finish(); goto VTWND; CLL1S: if (!($action == "\145\156\x76\x69\x72\x6f\x6e\x6d\145\x6e\x74")) { goto nCF06; } goto H4oXz; OevMH: $ret["\144\x6f\x6d"]["\146\x61\151\x6c\145\144"] = true; goto FrjXo; b_AvC: function local_create_sql($schema, $local_create_sql) { goto ApCmR; VPEsH: return $sql; goto unPYf; ApCmR: $pieces = explode("\137", $schema["\143\150\141\x72\x73\x65\164"]); goto Z4NYj; oIRJ2: $sql .= "\12\51\x20\105\116\x47\111\x4e\105\75{$engine}\40\104\105\106\x41\125\x4c\x54\x20\x43\110\101\x52\x53\105\124\x3d{$charset}\x3b\12\12"; goto VPEsH; Z6oan: $sql = "\103\122\105\x41\124\105\40\x54\x41\x42\114\x45\40\x49\x46\40\x4e\x4f\124\x20\x45\x58\111\x53\x54\x53\x20\140{$schema["\164\141\142\x6c\145\156\x61\155\x65"]}\140\x20\50\12"; goto xiQku; h0vMc: iGYnh: goto ZfGP0; wWMT7: tYkDn: goto Iw4W1; xiQku: foreach ($schema["\146\151\x65\x6c\144\x73"] as $value) { goto sBY8c; nyD6f: raV3v: goto i4LFb; Y60YT: goto M8SNL; goto Duwxj; DyzI0: goto ZpvHa; goto xvd1V; b5ixH: $increment = ''; goto yIqTD; NEwJ_: if ($value["\x69\156\143\162\x65\x6d\x65\x6e\x74"]) { goto raV3v; } goto b5ixH; i_Mva: a78RB: goto vpZPw; mbYBE: if (empty($value["\156\165\154\154"])) { goto vhOf6; } goto ThpR9; vgmCM: $null = "\x20\x4e\117\124\x20\x4e\x55\x4c\114"; goto g1qh5; i4LFb: $increment = "\40\x41\x55\x54\117\137\111\x4e\103\x52\x45\x4d\105\x4e\124"; goto jYJ7G; ThpR9: $null = ''; goto fByKE; yIqTD: goto I4A1W; goto nyD6f; R3Zcf: $sql .= "\140{$value["\156\x61\155\x65"]}\x60\x20{$value["\164\x79\x70\x65"]}{$length}{$signed}{$null}{$default}{$increment}\54\12"; goto i_Mva; Duwxj: U2U3X: goto c2Z9n; kpFEY: M8SNL: goto KjJj2; xHcCz: vhOf6: goto vgmCM; JANQK: ZpvHa: goto NEwJ_; sBY8c: if (!empty($value["\x6c\145\156\147\164\150"])) { goto U2U3X; } goto m3eLj; m3eLj: $length = ''; goto Y60YT; VYZyV: $default = "\x20\104\x45\106\101\125\x4c\124\x20\47" . $value["\x64\145\x66\x61\165\x6c\164"] . "\47"; goto JANQK; jYJ7G: I4A1W: goto R3Zcf; KjJj2: $signed = empty($value["\163\151\147\156\145\144"]) ? "\40\165\156\163\151\x67\156\145\x64" : ''; goto mbYBE; ajyJP: $default = ''; goto DyzI0; xvd1V: Tz9hZ: goto VYZyV; g1qh5: cFS2S: goto KCbcP; KCbcP: if (isset($value["\144\145\x66\141\165\154\x74"])) { goto Tz9hZ; } goto ajyJP; fByKE: goto cFS2S; goto xHcCz; c2Z9n: $length = "\x28{$value["\x6c\x65\156\x67\164\150"]}\51"; goto kpFEY; vpZPw: } goto wWMT7; Iw4W1: foreach ($schema["\151\156\144\145\x78\145\163"] as $value) { goto IyeV1; opOsz: QruyX: goto t0VKu; gXSIw: if (!($value["\x74\171\x70\145"] == "\165\x6e\x69\161\x75\145")) { goto OGH2K; } goto ytv_z; t0VKu: nFuPz: goto Fp7Wm; REhAv: OGH2K: goto za8uQ; ytv_z: $sql .= "\x55\116\x49\121\125\x45\40\113\x45\x59\x20\x60{$value["\x6e\141\155\x65"]}\x60\x20\x28\x60{$fields}\x60\x29\54\xa"; goto REhAv; aVnty: $sql .= "\x50\122\111\115\101\x52\x59\x20\113\x45\x59\40\50\x60{$fields}\140\x29\54\12"; goto opOsz; IyeV1: $fields = implode("\x60\54\140", $value["\146\x69\145\154\144\x73"]); goto a2G0p; a2G0p: if (!($value["\x74\x79\x70\x65"] == "\151\x6e\x64\x65\x78")) { goto f3XyM; } goto FLmKG; za8uQ: if (!($value["\164\x79\160\145"] == "\x70\x72\x69\x6d\x61\x72\x79")) { goto QruyX; } goto aVnty; J4wCh: f3XyM: goto gXSIw; FLmKG: $sql .= "\113\x45\131\x20\140{$value["\x6e\141\x6d\x65"]}\x60\40\50\140{$fields}\140\x29\54\12"; goto J4wCh; Fp7Wm: } goto h0vMc; ZfGP0: $sql = rtrim($sql); goto WprVd; WprVd: $sql = rtrim($sql, "\54"); goto oIRJ2; Z4NYj: $charset = $pieces[0]; goto oG3tx; oG3tx: $engine = $local_create_sql ? $schema["\145\156\x67\151\x6e\x65"] : "\115\171\111\123\x41\x4d"; goto Z6oan; unPYf: } goto DY5ME; kWPqD: xP2Ww: goto Wg8SW; Yp0Ks: gbw1W: goto n7uw2; uuEK2: if (!(file_exists(IA_INSTALL_ROOT . "\x2f\144\141\164\141\x2f\x69\x6e\x73\x74\141\x6c\154\x2e\x6c\157\x63\x6b") && !in_array($action, array("\x6f\x61\165\164\150", "\x6c\157\147\151\x6e")))) { goto B8b2p; } goto OYCTd; FVlZg: wm2cg: goto G62ZE; pBzvQ: $username = trim($_POST["\x75\x73\145\x72\156\141\155\145"]); goto kiqXy; KQZdK: if (file_exists(IA_INSTALL_ROOT . "\x2f\x64\x61\164\141\x2f\151\x6e\163\x74\141\154\x6c\56\154\x6f\x63\153")) { goto HhCml; } goto EVpKj; JdkJs: if ($ret["\x64\157\155"]["\x6f\153"]) { goto jf6kE; } goto OevMH; swfib: define("\x41\120\x49\x5f\107\105\124\x5f\120\101\103\x4b\x41\107\x45\x5f\x4d\x44\65\137\x41\x4e\104\137\x43\x48\x55\116\113\124\x4f\124\x41\114", API_HOST . "\x2f\165\x74\x69\x6c\57\160\x61\143\153\x61\x67\145\57\151\x6e\163\164\x61\x6c\x6c"); goto iJPft; DCuM6: $data = we7_request_api(API_OAUTH_ACCESSTOKEN, array("\x63\157\144\145" => $code)); goto lyCG4; U5zeb: error_reporting(0); goto mpVl2; FjsFX: exit(we7_error(0, "\x73\165\x63\143\145\x73\163")); goto sCqmc; nJ0Jn: $chunk_total = we7_getcookie("\143\x68\x75\x6e\153\x5f\164\x6f\164\141\154"); goto Zo5Ok; sENJ1: if (!($database_result !== true)) { goto zaK0h; } goto Tjv7G; IbuBG: ai85X: goto nHUVf; nAKYl: foreach (we7_need_extension() as $extension) { goto rEadb; VpRxd: Y7ZWq: goto XZlZV; rEadb: $if_ok = extension_loaded($extension); goto AC0Vs; veSy6: $ret[$extension]["\162\x65\x73\x75\154\164"] = "\344\xb8\215\xe6\224\257\346\214\201" . $extension; goto QMrwD; hA9ti: $ret[$extension]["\146\141\151\x6c\145\x64"] = true; goto Vr62g; Vr62g: $ret[$extension]["\x6e\141\x6d\145"] = $extension . "\xe6\x89\251\xe5\xb1\225"; goto veSy6; QMrwD: hxyrR: goto VpRxd; AC0Vs: if ($if_ok) { goto hxyrR; } goto hA9ti; XZlZV: } goto kR_Hq; SDpqR: $finished = false; goto mdThY; j02am: exit(we7_error(400, "\x63\x68\x75\156\x6b\xe5\244\247\xe4\272\x8e\xe6\x9c\200\xe5\244\xa7\345\200\xbc")); goto pzGro; heJXb: $db_username = trim($_POST["\165\163\x65\162\156\141\155\x65"]); goto MBZt8; giIo4: goto RUpmP; goto UflG0; kwLz2: goto Bc6ig; goto Yp0Ks; VIfn1: if (!(!empty($ret["\x73\x65\163\163\151\157\x6e"]["\x6f\x6b"]) && strtolower($ret["\163\x65\163\x73\x69\157\x6e"]["\157\x6b"]) == "\157\x6e")) { goto XnZWp; } goto mZYo2; A98F0: s1BVI: goto CLL1S; cUy5j: $ret["\166\x65\x72\163\151\157\156"]["\156\141\x6d\x65"] = "\120\x48\120\xe7\x89\210\346\234\254"; goto Te2HC; SzsoG: $ret["\x66\x6f\x70\145\x6e"]["\x66\141\x69\154\x65\144"] = true; goto V0TVr; wkIJo: function we7_update_user($username, $password) { goto yNb8H; FdAqj: return $result ? true : false; goto KOheX; sk4xO: $result = pdo_update("\165\x73\x65\x72\163", array("\x75\x73\145\162\x6e\x61\x6d\145" => $username, "\160\141\163\163\167\x6f\162\144" => $password), array("\x75\151\x64" => $userinfo["\x75\151\144"])); goto Mo1kt; nQEAG: load()->model("\165\163\145\162"); goto VixRo; yNb8H: global $_W, $is_https; goto nQEAG; VaiNf: setcookie($_W["\x63\157\x6e\x66\x69\x67"]["\x63\x6f\157\x6b\x69\145"]["\x70\x72\x65"] . "\x5f\137\x73\145\163\x73\151\157\x6e", $session, 0, "\57", '', $secure, true); goto FdAqj; kgl3k: $cookie["\x68\141\x73\150"] = md5($password . $userinfo["\x73\141\154\x74"]); goto bXD_B; nmExe: $cookie["\x75\151\x64"] = $userinfo["\x75\x69\144"]; goto kgl3k; s8gcT: $secure = $is_https ? 1 : 0; goto VaiNf; MHJOl: $password = user_hash($password, $userinfo["\x73\141\154\x74"]); goto sk4xO; bXD_B: $session = install_authcode(json_encode($cookie), "\145\156\143\x6f\144\145", $_W["\143\x6f\156\146\151\x67"]["\163\x65\164\x74\151\x6e\147"]["\x61\165\164\150\x6b\x65\x79"]); goto s8gcT; VixRo: $userinfo = pdo_get("\165\x73\x65\162\x73", array("\x75\163\145\x72\156\x61\x6d\145" => "\x61\x64\155\x69\156")); goto MHJOl; Mo1kt: $cookie = array("\154\x61\163\x74\x76\x69\163\151\x74" => '', "\x6c\141\x73\164\151\x70" => ''); goto nmExe; KOheX: } goto fvrX_; ro2ms: goto nXi0p; goto Kvpr6; paWLN: exit(we7_error(421, $handle_result)); goto kxn_Q; ct0Gk: touch(IA_INSTALL_ROOT . "\x2f\x64\x61\x74\x61\x2f\144\x62\x2e\x6c\x6f\143\153"); goto i2_qH; vdzav: if (!($register_site_result !== true)) { goto KmNyL; } goto eSb3h; Skfmb: McHf3: goto npaAF; fPZRP: exit(we7_error(434, $result)); goto giIo4; Ff40Y: nCF06: goto SSb0a; S8MmX: exit(we7_error(0, "\163\165\143\x63\145\x73\163")); goto N8wrR; Cp7d3: $action = "\157\x61\165\x74\x68"; goto tJdRg; FrjXo: $ret["\144\157\x6d"]["\x6e\141\x6d\x65"] = "\104\x4f\x4d\x44\x6f\x63\165\x6d\x65\156\164"; goto wcBM7; Vgev6: $siteroot = ($is_https ? "\150\x74\164\160\x73\72\x2f\57" : "\x68\x74\164\160\72\57\x2f") . $_SERVER["\123\x45\122\x56\105\122\137\116\101\115\x45"] . $sitepath; goto lngGc; jpoyk: $ret["\163\x65\x73\x73\x69\x6f\x6e"]["\x6e\141\155\x65"] = "\x73\x65\x73\163\x69\x6f\156\56\141\x75\164\x6f\137\x73\x74\x61\x72\164\345\274\x80\xe5\x90\xaf"; goto Dh4Jt; TMN29: exit; goto M6nF6; W6EUg: $ret["\141\154\167\141\171\163\137\x70\x6f\160\x75\x6c\141\164\145\x5f\x72\x61\x77\x5f\160\157\x73\164\x5f\x64\x61\x74\141"]["\x6e\x61\x6d\145"] = "\141\x6c\x77\141\x79\x73\x5f\160\157\x70\165\154\x61\164\x65\137\x72\x61\167\137\x70\x6f\163\164\137\144\141\x74\x61\xe9\205\x8d\xe7\275\256"; goto cLvCn; uAbuZ: function we7_build_config($server, $db_username, $db_password, $db_name, $db_prefix) { goto ek3rU; xulXd: return "\xe6\202\250\xe7\232\204\xe6\225\260\xe6\x8d\256\xe5\272\x93\xe4\270\215\xe4\270\xba\347\251\xba\xef\xbc\x8c\350\257\xb7\351\x87\215\xe6\x96\260\345\273\272\xe7\xab\x8b\346\x95\260\346\215\256\345\xba\x93\346\x88\x96\346\230\xaf\xe6\xb8\x85\347\251\xba\xe8\xaf\245\xe6\225\260\346\215\256\xe5\xba\223\xe6\210\226\xe6\x9b\xb4\346\x94\271\xe8\241\xa8\345\211\x8d\347\xbc\200\xef\xbc\x81"; goto qUoet; GLgh1: $statement = $link->query("\x53\x48\x4f\x57\40\x54\x41\x42\114\105\123\x20\114\111\x4b\x45\40\47{$db["\x70\x72\145\x66\151\170"]}\45\x27\x3b"); goto RPyzP; QScuc: try { goto vWbWv; Kg5YO: AP3DM: goto KmJdw; IvGNk: $link->query("\x43\x52\x45\101\x54\x45\40\104\x41\x54\x41\102\101\123\105\40\x49\106\x20\116\x4f\124\40\x45\130\x49\123\124\x53\x20\x60{$db["\156\141\155\x65"]}\x60"); goto YQ1C6; lR4ia: $statement = $link->query("\123\x48\117\x57\x20\104\x41\124\x41\x42\101\123\x45\123\x20\114\111\113\105\x20\47{$db["\x6e\141\x6d\145"]}\x27\73"); goto UKLB9; eaADF: $error = $errorInfo[2]; goto TpuK4; ic4bu: goto bFc2q; goto AW_EH; N7LyP: if (!empty($fetch)) { goto AP3DM; } goto s9Nks; VF2kE: if (!empty($fetch)) { goto zcYQN; } goto oxsDk; qBjus: cYGFt: goto D9teF; Qldyz: if (!($link->errorCode() != "\x30\60\60\x30\60")) { goto mRMIU; } goto xjHBn; s9Nks: if (substr($link->getAttribute(PDO::ATTR_SERVER_VERSION), 0, 3) > "\64\56\61") { goto cYGFt; } goto IvGNk; HzHKV: $errorInfo = $link->errorInfo(); goto eaADF; oxsDk: $error .= "\xe6\x95\xb0\xe6\215\256\xe5\xba\x93\344\xb8\x8d\345\xad\x98\xe5\234\250\344\xb8\x94\345\210\233\345\xbb\xba\xe6\225\260\xe6\215\256\345\272\x93\xe5\xa4\261\350\xb4\xa5\56"; goto cuK1Q; Bvwqc: $link->exec("\123\105\x54\40\x63\x68\x61\x72\x61\143\x74\x65\x72\137\x73\x65\164\x5f\x63\157\x6e\x6e\145\143\x74\151\157\x6e\x3d\165\164\146\x38\x2c\x20\x63\x68\141\x72\x61\143\x74\x65\162\x5f\163\x65\x74\x5f\x72\x65\163\x75\154\164\x73\x3d\165\164\x66\70\x2c\40\x63\150\x61\162\x61\x63\x74\x65\x72\x5f\x73\145\164\137\x63\x6c\151\145\156\x74\x3d\x62\151\156\141\x72\x79"); goto yLHgF; n6JsM: if ($link->errorCode() != "\x30\x30\60\60\x30") { goto EyBwK; } goto lR4ia; D9teF: $link->query("\103\122\x45\x41\124\105\40\104\x41\124\x41\x42\x41\123\105\x20\x49\106\40\x4e\x4f\x54\x20\105\130\x49\123\124\123\40\140{$db["\x6e\x61\155\x65"]}\x60\x20\104\x45\x46\x41\125\114\x54\x20\x43\x48\101\x52\101\103\x54\105\x52\x20\x53\x45\124\x20\165\164\146\x38"); goto HI021; TpuK4: bFc2q: goto ZyStg; HI021: u8qC2: goto Kg5YO; cuK1Q: zcYQN: goto Qldyz; YQ1C6: goto u8qC2; goto qBjus; yLHgF: $link->exec("\123\105\124\x20\x73\x71\154\137\x6d\x6f\x64\145\75\47\47"); goto n6JsM; UKLB9: $fetch = $statement->fetch(); goto N7LyP; KmJdw: $statement = $link->query("\123\110\117\x57\x20\104\101\x54\x41\x42\x41\123\105\x53\x20\114\111\113\x45\40\x27{$db["\x6e\141\x6d\x65"]}\47\73"); goto Nq9Cm; cmfaS: mRMIU: goto ic4bu; eYSfV: $error .= $errorInfo[2]; goto cmfaS; vWbWv: $link = new PDO("\155\x79\163\161\x6c\72\x68\157\163\x74\75{$db["\x73\x65\162\166\145\x72"]}\73\x70\157\x72\x74\75{$db["\x70\157\x72\164"]}", $db["\165\x73\x65\162\156\x61\x6d\x65"], $db["\x70\x61\163\163\167\157\162\144"]); goto Bvwqc; xjHBn: $errorInfo = $link->errorInfo(); goto eYSfV; AW_EH: EyBwK: goto HzHKV; Nq9Cm: $fetch = $statement->fetch(); goto VF2kE; ZyStg: } catch (PDOException $e) { goto LZotE; LZotE: $error = $e->getMessage(); goto i28wl; bN78J: fk5CY: goto TkLl8; b1P8Q: $error = iconv("\x67\142\153", "\165\x74\x66\70", $error); goto yS1ZS; yS1ZS: goto BdFC4; goto bN78J; i28wl: if (strpos($error, "\101\143\x63\x65\x73\x73\40\x64\x65\x6e\x69\x65\x64\40\x66\x6f\x72\x20\165\163\x65\x72") !== false) { goto fk5CY; } goto b1P8Q; kinUY: BdFC4: goto Ei0nG; TkLl8: $error = "\346\x82\250\347\x9a\204\xe6\x95\xb0\xe6\x8d\256\345\272\x93\xe8\xae\xbf\xe9\x97\xae\xe7\x94\xa8\346\210\267\xe5\x90\x8d\xe6\x88\226\xe6\230\xaf\xe5\xaf\206\347\xa0\201\351\x94\231\xe8\xaf\257\56"; goto kinUY; Ei0nG: } goto QiWwU; ooH1I: $result = file_put_contents(IA_INSTALL_ROOT . "\x2f\144\x61\164\x61\57\143\157\156\146\x69\x67\56\160\150\x70", $config); goto jxVIy; Uji_p: return false; goto rbl0S; IBriE: $db = array("\163\145\x72\x76\x65\x72" => $pieces[0], "\x70\x6f\x72\x74" => !empty($pieces[1]) ? $pieces[1] : "\x33\63\60\66", "\x75\163\x65\162\x6e\x61\x6d\x65" => $db_username, "\x70\141\163\x73\167\157\162\x64" => $db_password, "\x70\x72\x65\x66\x69\170" => $db_prefix, "\x6e\x61\155\x65" => $db_name); goto QScuc; jxVIy: return $result !== false ? true : false; goto wKf22; rbl0S: BgTjO: goto OTE4q; LDDRv: $cookiepre = local_salt(4) . "\x5f"; goto Y9HRA; Y9HRA: $authkey = local_salt(8); goto xTFCz; tbLlg: jPOr9: goto VuRZF; RPyzP: if (!$statement->fetch()) { goto ddYyL; } goto xulXd; qUoet: ddYyL: goto GXS8C; ek3rU: if (!(empty($server) || empty($db_username) || empty($db_password) || empty($db_name))) { goto BgTjO; } goto Uji_p; VuRZF: $link->exec("\x55\123\x45\x20{$db["\156\x61\x6d\145"]}"); goto GLgh1; GXS8C: $config = local_config(); goto LDDRv; PNTiC: local_mkdirs(IA_INSTALL_ROOT . "\x2f\x64\141\x74\x61"); goto ooH1I; tmyxU: return $error; goto tbLlg; xTFCz: $config = str_replace(array("\173\x64\142\x2d\x73\145\x72\166\145\162\175", "\x7b\144\x62\x2d\165\163\145\162\x6e\x61\x6d\x65\x7d", "\173\x64\x62\x2d\x70\x61\163\x73\x77\157\x72\144\175", "\173\x64\x62\x2d\x70\157\162\x74\175", "\173\x64\142\x2d\x6e\x61\x6d\145\x7d", "\173\144\142\55\164\141\x62\154\145\160\162\145\x7d", "\x7b\143\x6f\157\153\151\x65\x70\162\145\175", "\173\141\165\x74\150\x6b\x65\x79\x7d", "\173\141\x74\164\x61\143\150\144\x69\162\175"), array($db["\163\145\162\x76\145\162"], $db["\x75\163\x65\x72\x6e\141\155\x65"], $db["\x70\141\x73\x73\167\157\x72\x64"], $db["\160\157\x72\164"], $db["\156\x61\155\145"], $db["\x70\x72\145\146\151\x78"], $cookiepre, $authkey, "\x61\164\164\141\x63\x68\155\145\156\x74"), $config); goto PNTiC; OTE4q: $pieces = explode("\72", $server); goto IBriE; QiWwU: if (empty($error)) { goto jPOr9; } goto tmyxU; wKf22: } goto N8G0z; eoZU9: exit(we7_error(400, "\350\257\267\351\207\215\xe6\x96\260\347\x99\xbb\345\275\x95\x2e")); goto Gm8fl; H9sCu: maeB4: goto J9__3; mryOw: if ($ret["\162\157\157\164"]["\x6f\x6b"]) { goto u00Me; } goto a8NCu; SOlHy: function we7_get_accesstoken() { goto QRHU2; eOYOf: return $accesstoken["\141\143\x63\145\163\163\124\x6f\x6b\x65\156"]; goto P4wiv; kW_kH: $accesstoken = json_decode($cookie_accesstoken, true); goto NBiMJ; NBiMJ: if (!(!empty($accesstoken) && !empty($accesstoken["\x61\143\143\x65\163\163\x54\157\x6b\x65\156"]) && $accesstoken["\x65\170\x70\151\162\x65\x54\151\x6d\x65"] > time())) { goto SHhTB; } goto eOYOf; QRHU2: $cookie_accesstoken = we7_getcookie("\141\x63\143\145\x73\163\164\x6f\x6b\145\156"); goto kW_kH; CFRIT: return ''; goto Wlnnt; P4wiv: SHhTB: goto CFRIT; Wlnnt: } goto xV0BG; nDHJU: $actions = array("\x6f\141\165\164\150", "\x65\156\166\x69\162\157\x6e\x6d\145\156\164", "\151\x6e\x73\x74\x61\x6c\x6c", "\x63\x68\165\x6e\153\164\x6f\x74\x61\x6c", "\144\157\x77\x6e\154\157\141\x64", "\x69\x6e\x73\164\141\154\154", "\x72\145\147\151\163\x74\145\162\x5f\143\x61\154\154\142\141\x63\153", "\154\157\147\151\x6e"); goto Qa2Lj; XCPbP: if (!(version_compare(PHP_VERSION, "\67\x2e\60\56\x30") == -1 && version_compare(PHP_VERSION, "\65\x2e\66\56\60") >= 0)) { goto v7ZAI; } goto FHyky; kQukD: v7ZAI: goto pHV1S; J9__3: $post = array("\x61\143\143\145\163\x73\x5f\164\157\x6b\x65\x6e" => $accesstoken, "\143\150\x75\156\x6b" => $chunk_num); goto uXFUH; shjKq: qJV1k: goto nAKYl; YaxbS: Bc6ig: goto zoIeO; KrWTl: goto I6afZ; goto Skfmb; Lnogo: goto DE9g0; goto DILTl; i2_qH: huqpw: goto KQZdK; fdM0M: DE9g0: goto Cm8pU; NUbZv: nFRjH: goto uKkGM; wcBM7: $ret["\144\x6f\x6d"]["\162\x65\x73\165\154\x74"] = "\346\262\241\346\x9c\211\xe5\x90\xaf\xe7\x94\250\x44\x4f\115\x44\x6f\143\165\x6d\x65\x6e\x74"; goto J7x3Y; BVOx9: $ret["\162\157\x6f\164"]["\162\145\x73\x75\154\x74"] = "\xe6\234\254\xe5\x9c\xb0\xe7\233\xae\345\xbd\225\xe6\227\240\346\263\x95\xe5\206\231\345\x85\xa5"; goto agVr_; EghIk: header("\143\157\156\164\145\156\x74\55\164\171\160\145\x3a\x20\x74\x65\x78\164\x2f\x68\x74\155\154\73\40\x63\x68\x61\x72\163\145\x74\x3d\x75\164\x66\x2d\70"); goto F7gyV; cLKOh: $accesstoken = we7_get_accesstoken(); goto fQzsZ; kzRKB: function local_config() { $cfg = "\x3c\77\x70\150\x70\15\12\144\145\x66\x69\x6e\x65\144\50\x27\x49\x4e\137\x49\x41\47\51\40\157\x72\x20\145\x78\x69\164\x28\x27\101\x63\143\145\x73\x73\40\x44\x65\156\x69\145\x64\x27\51\73\15\12\xd\xa\x24\143\x6f\156\146\x69\x67\x20\x3d\x20\141\x72\162\141\171\x28\x29\x3b\xd\xa\xd\12\x24\143\x6f\x6e\x66\x69\x67\133\x27\x64\x62\x27\x5d\x5b\47\x6d\141\163\164\x65\x72\x27\x5d\x5b\x27\150\157\163\164\47\135\x20\75\x20\47\173\x64\142\x2d\x73\145\x72\x76\145\x72\x7d\47\x3b\15\xa\44\x63\x6f\156\146\x69\x67\x5b\47\x64\142\47\135\133\47\x6d\141\163\x74\x65\x72\47\135\133\x27\165\x73\145\162\156\141\155\x65\x27\x5d\x20\x3d\40\x27\173\x64\x62\x2d\x75\163\145\x72\x6e\141\155\145\175\x27\73\15\xa\x24\x63\157\x6e\146\151\147\133\47\x64\x62\47\135\x5b\47\155\x61\163\164\x65\x72\47\135\133\47\160\x61\x73\163\167\157\162\144\x27\x5d\40\x3d\40\x27\x7b\144\x62\55\x70\141\163\163\x77\x6f\162\x64\175\47\x3b\15\xa\x24\143\x6f\x6e\146\x69\x67\133\47\144\142\x27\x5d\133\47\x6d\141\163\x74\145\x72\x27\x5d\133\x27\x70\x6f\162\x74\x27\135\x20\x3d\40\x27\173\x64\142\x2d\160\x6f\x72\x74\175\47\73\15\xa\44\x63\x6f\156\x66\151\x67\x5b\47\144\142\x27\x5d\x5b\47\155\x61\163\x74\x65\162\47\x5d\133\x27\144\141\x74\141\x62\x61\x73\x65\x27\x5d\40\x3d\40\47\x7b\144\x62\55\156\141\x6d\x65\x7d\47\73\xd\xa\44\x63\x6f\x6e\x66\151\x67\x5b\47\144\142\x27\x5d\133\x27\x6d\x61\x73\x74\x65\162\47\135\x5b\47\143\150\141\162\x73\145\x74\x27\135\40\x3d\40\x27\165\x74\x66\x38\x27\x3b\xd\12\x24\x63\x6f\156\x66\151\147\133\47\x64\142\x27\135\x5b\x27\x6d\x61\x73\x74\x65\162\47\x5d\133\x27\x70\x63\x6f\x6e\156\145\x63\164\47\x5d\x20\x3d\x20\x30\73\15\12\x24\x63\157\156\x66\x69\147\x5b\x27\x64\142\x27\135\x5b\x27\x6d\x61\163\x74\x65\162\x27\x5d\133\x27\x74\141\142\x6c\145\160\162\x65\x27\x5d\x20\75\40\x27\x7b\144\x62\55\164\x61\x62\x6c\x65\160\162\145\175\x27\x3b\15\xa\xd\12\x24\x63\x6f\x6e\x66\x69\x67\133\47\144\x62\47\135\133\47\x73\x6c\x61\x76\x65\x5f\163\164\x61\164\x75\163\x27\135\40\x3d\x20\146\x61\154\163\145\x3b\xd\12\44\143\x6f\x6e\146\151\147\133\47\144\x62\47\135\133\x27\x73\x6c\x61\x76\145\x27\x5d\x5b\x27\61\47\135\x5b\47\150\x6f\x73\164\47\135\x20\75\x20\47\47\x3b\15\12\x24\x63\x6f\x6e\146\x69\147\x5b\47\x64\142\x27\135\133\x27\x73\154\x61\166\145\x27\135\x5b\x27\x31\47\x5d\133\x27\x75\x73\x65\162\156\x61\x6d\x65\47\135\40\75\x20\47\x27\73\xd\12\44\x63\157\156\x66\x69\147\133\47\144\x62\47\x5d\133\x27\x73\x6c\141\166\x65\47\x5d\133\x27\x31\47\135\133\47\160\141\x73\x73\x77\x6f\162\x64\x27\135\40\x3d\x20\x27\47\x3b\xd\xa\x24\143\x6f\156\146\x69\147\133\47\144\x62\x27\x5d\133\47\163\154\141\x76\x65\47\135\x5b\47\61\x27\x5d\x5b\47\160\157\162\164\x27\x5d\x20\75\40\x27\x33\63\60\x37\47\73\15\12\x24\143\x6f\x6e\146\151\x67\x5b\47\144\142\x27\135\133\47\163\154\x61\x76\145\x27\135\133\x27\x31\x27\135\x5b\47\144\x61\164\x61\x62\x61\163\x65\47\135\x20\75\x20\x27\x27\x3b\xd\xa\44\143\157\156\x66\x69\x67\x5b\x27\144\x62\47\135\x5b\47\x73\154\x61\166\145\47\x5d\x5b\x27\x31\x27\x5d\x5b\x27\143\x68\141\162\x73\145\164\47\x5d\x20\75\40\x27\x75\x74\x66\70\x27\73\xd\12\44\143\x6f\x6e\146\151\x67\x5b\x27\144\142\x27\135\133\47\x73\x6c\141\166\145\47\135\133\47\x31\47\135\133\x27\160\143\157\156\x6e\x65\x63\164\47\x5d\40\x3d\x20\60\73\xd\12\44\143\157\156\x66\151\147\x5b\x27\144\142\47\x5d\133\47\163\x6c\x61\x76\145\x27\135\x5b\47\61\x27\x5d\133\x27\x74\141\x62\x6c\x65\160\162\145\47\135\40\75\40\47\151\155\x73\137\47\x3b\xd\12\x24\143\x6f\x6e\146\x69\147\133\47\x64\142\47\x5d\133\x27\x73\x6c\x61\166\x65\x27\135\133\47\x31\x27\x5d\133\x27\167\x65\151\x67\x68\x74\x27\x5d\x20\75\x20\60\73\15\xa\15\12\x24\143\157\x6e\146\x69\147\133\x27\144\142\x27\135\133\47\143\157\155\x6d\157\x6e\x27\135\x5b\47\x73\x6c\141\166\x65\x5f\145\170\143\x65\x70\x74\137\x74\141\142\154\145\47\x5d\40\75\x20\x61\162\162\141\x79\x28\47\143\x6f\x72\145\137\x73\x65\163\163\x69\157\156\163\47\x29\73\15\xa\15\xa\x2f\57\40\55\x2d\x2d\x2d\55\55\55\55\x2d\x2d\x2d\x2d\x2d\55\x2d\55\55\x2d\55\55\x2d\55\x2d\55\55\x2d\x20\x20\x43\117\116\106\x49\x47\40\x43\x4f\x4f\x4b\x49\105\40\x20\55\x2d\x2d\55\x2d\x2d\x2d\55\55\55\x2d\x2d\55\x2d\55\x2d\55\55\55\x2d\x2d\x2d\x2d\55\55\55\x2d\x20\57\x2f\15\12\44\x63\157\156\x66\151\x67\133\x27\143\157\x6f\x6b\x69\145\x27\x5d\x5b\x27\x70\x72\x65\x27\x5d\40\75\x20\x27\173\x63\157\157\153\x69\x65\x70\x72\145\x7d\47\x3b\15\12\x24\x63\x6f\x6e\x66\151\x67\x5b\47\x63\x6f\157\153\x69\x65\47\135\x5b\x27\x64\x6f\x6d\141\x69\x6e\x27\x5d\x20\x3d\x20\47\x27\x3b\xd\12\x24\x63\157\x6e\146\151\x67\x5b\x27\143\x6f\x6f\x6b\151\x65\x27\135\133\47\160\x61\x74\x68\x27\x5d\40\75\x20\x27\57\47\73\xd\xa\xd\12\x2f\x2f\x20\55\55\55\55\55\55\x2d\x2d\55\x2d\x2d\x2d\x2d\55\55\x2d\x2d\55\55\x2d\55\55\x2d\55\x2d\x2d\x20\40\x43\117\116\106\111\107\x20\123\x45\124\124\111\x4e\x47\40\x20\x2d\x2d\x2d\55\55\55\55\55\x2d\55\x2d\55\x2d\x2d\x2d\x2d\x2d\x2d\55\x2d\x2d\x2d\x2d\x2d\55\55\55\x20\x2f\x2f\15\12\x24\x63\157\156\x66\151\x67\x5b\x27\x73\x65\164\164\x69\x6e\x67\47\135\133\x27\143\150\141\x72\x73\x65\164\47\x5d\x20\75\x20\x27\165\x74\146\x2d\x38\x27\73\xd\xa\44\143\157\x6e\146\151\147\x5b\x27\163\145\164\x74\x69\156\x67\47\x5d\x5b\47\x63\x61\143\150\x65\x27\x5d\x20\x3d\x20\47\155\x79\163\x71\x6c\x27\73\xd\12\44\143\157\x6e\146\x69\147\x5b\x27\x73\145\164\164\x69\156\147\47\x5d\133\x27\164\x69\155\x65\x7a\x6f\x6e\x65\47\x5d\x20\75\x20\x27\101\163\151\x61\57\123\x68\x61\x6e\147\150\x61\x69\47\x3b\15\xa\x24\x63\x6f\156\x66\151\x67\x5b\x27\x73\x65\164\164\x69\x6e\x67\x27\x5d\133\x27\155\x65\155\x6f\x72\x79\x5f\154\x69\155\151\x74\47\135\40\75\x20\47\62\65\66\x4d\47\x3b\xd\12\44\x63\157\156\x66\x69\x67\133\47\163\145\164\164\151\156\147\47\135\x5b\x27\146\151\x6c\x65\x6d\x6f\x64\145\x27\135\x20\x3d\40\60\x36\64\x34\x3b\xd\12\x24\143\x6f\156\x66\151\147\x5b\47\163\145\164\x74\x69\x6e\147\x27\x5d\x5b\47\141\165\164\x68\153\145\171\x27\135\x20\x3d\x20\47\x7b\141\165\164\x68\x6b\145\x79\x7d\47\x3b\xd\xa\44\x63\x6f\156\146\151\147\x5b\x27\x73\145\164\164\151\156\x67\47\135\x5b\47\x66\x6f\165\156\144\145\162\x27\135\x20\x3d\x20\x27\x31\x27\73\15\12\44\x63\x6f\x6e\x66\x69\147\x5b\x27\163\145\164\x74\x69\156\x67\x27\135\133\x27\144\x65\x76\x65\x6c\x6f\160\x6d\x65\x6e\164\x27\135\x20\x3d\x20\60\73\xd\12\44\143\157\x6e\x66\151\x67\x5b\x27\163\145\164\164\151\156\x67\47\x5d\133\x27\162\145\x66\145\162\x72\145\162\x27\x5d\40\x3d\x20\60\73\15\12\xd\xa\x2f\57\40\x2d\55\55\x2d\x2d\x2d\55\x2d\x2d\x2d\x2d\x2d\x2d\x2d\x2d\55\x2d\55\x2d\55\55\x2d\x2d\55\x2d\x2d\x20\x20\103\x4f\116\106\111\x47\40\x55\x50\x4c\x4f\x41\104\x20\40\55\55\55\x2d\55\55\x2d\55\x2d\x2d\55\x2d\55\55\x2d\x2d\x2d\55\55\x2d\55\x2d\55\x2d\55\55\x2d\40\x2f\57\15\xa\x24\143\x6f\x6e\x66\x69\147\x5b\x27\x75\160\154\157\x61\144\47\135\x5b\x27\x69\155\141\147\145\x27\135\x5b\47\x65\x78\164\145\x6e\x74\151\x6f\156\163\47\x5d\40\x3d\x20\141\162\x72\x61\171\x28\47\x67\151\x66\x27\54\40\x27\x6a\160\x67\47\54\40\47\x6a\x70\x65\x67\47\54\x20\47\160\x6e\x67\47\51\x3b\xd\xa\x24\x63\157\x6e\x66\151\x67\x5b\47\x75\160\x6c\x6f\141\144\47\135\x5b\x27\x69\x6d\141\147\145\x27\x5d\x5b\47\x6c\x69\x6d\151\164\x27\135\40\x3d\x20\65\x30\60\x30\73\xd\12\x24\x63\x6f\156\146\x69\147\133\47\x75\160\x6c\x6f\x61\144\x27\x5d\x5b\47\141\164\x74\141\143\x68\x64\x69\162\x27\x5d\x20\75\40\x27\173\x61\x74\x74\x61\143\150\144\151\x72\x7d\47\x3b\15\12\x24\143\x6f\x6e\x66\151\147\133\x27\165\160\154\x6f\x61\x64\x27\135\133\47\141\165\144\151\157\x27\x5d\133\47\x65\170\x74\145\x6e\164\151\x6f\x6e\163\x27\135\40\x3d\40\x61\162\x72\x61\171\50\x27\155\160\x33\47\51\x3b\xd\xa\x24\143\x6f\156\146\x69\147\133\x27\165\x70\154\x6f\x61\144\47\135\133\47\x61\x75\144\151\157\47\135\x5b\x27\x6c\x69\x6d\151\164\47\135\x20\75\x20\x35\60\x30\x30\73\xd\12\xd\xa\x2f\x2f\40\55\55\x2d\55\55\55\x2d\55\x2d\x2d\x2d\x2d\x2d\55\55\x2d\55\55\x2d\55\55\x2d\x2d\x2d\x2d\x2d\40\x20\x43\x4f\x4e\106\111\x47\40\115\105\x4d\103\101\x43\110\x45\x20\x20\55\x2d\x2d\x2d\55\x2d\x2d\x2d\55\x2d\x2d\55\x2d\x2d\x2d\55\x2d\55\55\x2d\55\x2d\x2d\55\55\x2d\55\40\x2f\x2f\15\12\44\x63\157\156\146\151\x67\x5b\47\163\x65\x74\x74\151\x6e\147\x27\x5d\133\x27\x6d\145\x6d\143\x61\143\150\x65\x27\135\x5b\47\163\145\162\x76\145\162\x27\135\x20\x3d\x20\x27\47\73\15\12\44\143\x6f\x6e\146\x69\x67\133\x27\163\x65\164\164\x69\x6e\147\47\135\x5b\47\x6d\x65\155\143\x61\x63\150\145\x27\135\x5b\x27\x70\x6f\x72\164\47\x5d\40\x3d\x20\61\61\62\x31\61\73\15\xa\44\143\157\156\x66\151\x67\133\x27\x73\x65\164\164\x69\156\x67\x27\x5d\133\x27\x6d\145\x6d\143\x61\x63\x68\145\47\135\x5b\47\x70\143\x6f\156\156\145\x63\164\x27\x5d\x20\x3d\40\x31\73\xd\12\x24\x63\x6f\x6e\x66\151\x67\133\x27\x73\145\x74\x74\151\x6e\147\x27\135\x5b\x27\x6d\145\x6d\143\x61\x63\x68\x65\x27\x5d\x5b\47\x74\x69\x6d\145\x6f\x75\164\47\x5d\x20\75\x20\63\x30\73\xd\xa\x24\x63\x6f\156\x66\151\147\x5b\x27\163\145\x74\x74\x69\x6e\147\x27\135\x5b\47\x6d\145\155\143\141\143\150\x65\x27\135\x5b\47\163\145\x73\163\151\157\x6e\47\x5d\x20\75\40\61\x3b\15\12\15\xa\57\57\40\x2d\55\x2d\55\x2d\x2d\x2d\x2d\55\55\55\x2d\x2d\55\x2d\x2d\55\x2d\x2d\x2d\x2d\55\x2d\55\55\55\40\40\103\x4f\116\x46\x49\107\x20\x50\x52\117\x58\x59\x20\40\55\x2d\x2d\x2d\x2d\x2d\x2d\55\x2d\x2d\55\x2d\55\x2d\55\x2d\55\x2d\x2d\55\x2d\x2d\55\55\55\55\55\40\57\57\xd\12\44\143\x6f\x6e\146\x69\147\x5b\47\x73\x65\164\164\151\x6e\147\x27\x5d\x5b\x27\x70\162\x6f\170\171\47\135\x5b\x27\150\157\x73\x74\47\135\40\x3d\40\x27\x27\x3b\xd\12\x24\x63\x6f\x6e\x66\x69\x67\x5b\47\x73\x65\164\164\x69\x6e\147\x27\x5d\133\x27\x70\162\157\x78\171\47\x5d\x5b\47\141\x75\164\150\x27\135\x20\x3d\x20\x27\47\73"; return trim($cfg); } goto XZoXn; XZoXn: function local_mkdirs($path) { goto QGEz6; Lw9bS: return is_dir($path); goto LWq0B; YvbAz: mkdir($path); goto upA1Q; upA1Q: BTorJ: goto Lw9bS; QGEz6: if (is_dir($path)) { goto BTorJ; } goto EePT1; EePT1: local_mkdirs(dirname($path)); goto YvbAz; LWq0B: } goto kmhZX; nvcmQ: m8TsN: goto XCPbP; Dh4Jt: $ret["\x73\145\163\163\151\x6f\x6e"]["\162\x65\x73\x75\154\164"] = "\347\xb3\273\347\xbb\237\x73\x65\x73\163\151\157\156\56\x61\165\164\x6f\x5f\163\x74\x61\x72\x74\xe5\274\200\xe5\x90\257"; goto dVrGG; psuLj: define("\111\x41\x5f\x49\116\x53\124\101\x4c\x4c\137\x52\117\x4f\124", str_replace("\x5c", "\x2f", dirname(__FILE__))); goto C0wzc; BHR5Q: $ret["\144\x61\x74\141"]["\146\141\151\x6c\x65\144"] = true; goto KUW3U; EzjRk: $data = we7_request_api(API_OAUTH_LOGIN_URL, array("\162\x65\x64\151\x72\x65\143\x74" => $callback)); goto JEz4T; AjN9w: exit(we7_error(432, "\xe8\xaf\xb7\345\205\x88\350\x8e\267\345\217\x96\345\x88\x86\345\215\xb7\xe6\200\xbb\351\207\x8f\56")); goto Cly9y; YtddG: if ($ret["\146\157\160\145\156"]["\x6f\x6b"]) { goto pwYoB; } goto SzsoG; fXPBB: we7_handle_chunk(); goto Qwm6Z; z0qBJ: function local_writeable($dir) { goto W3f5Y; TYQEt: if (!is_dir($dir)) { goto lamc0; } goto Gh0b2; T2zw9: @mkdir($dir, 0777); goto q0gty; cZ_cQ: return $writeable; goto ZjAo4; a83kr: $writeable = 1; goto D8xdK; W3f5Y: $writeable = 0; goto R0tva; D8xdK: ks6RQ: goto EsibV; f0oET: goto ks6RQ; goto nHCOH; ZDgGv: unlink("{$dir}\57\x74\x65\x73\x74\x2e\164\170\164"); goto a83kr; R0tva: if (is_dir($dir)) { goto i4DZL; } goto T2zw9; nHCOH: Ipdec: goto kZaQe; kZaQe: fclose($fp); goto ZDgGv; EsibV: lamc0: goto cZ_cQ; Gh0b2: if ($fp = fopen("{$dir}\x2f\x74\145\163\x74\56\x74\170\x74", "\167")) { goto Ipdec; } goto m1gqo; q0gty: i4DZL: goto TYQEt; m1gqo: $writeable = 0; goto f0oET; ZjAo4: } goto ZLWjd; MGdxD: exit(we7_error(433, "\x61\143\143\x65\163\x73\x74\157\x6b\145\x6e\x20\x65\170\160\151\162\x65\x64\x2e")); goto fdM0M; hD2Xr: O_02J: goto tQi4q; kR_Hq: ETy0e: goto NPynU; pfLwl: $data = we7_request_api(API_GET_PACKAGE_MD5_AND_CHUNKTOTAL, array("\x61\143\x63\145\x73\163\137\x74\157\x6b\145\x6e" => $accesstoken)); goto DalZl; CbduA: if (!($database_result !== true)) { goto BUNS5; } goto eeqOZ; DY5ME: function install_authcode($string, $operation = "\104\x45\103\x4f\x44\x45", $key = '', $expiry = 0) { goto FctSA; fUy86: $keyc = $ckey_length ? $operation == "\104\105\x43\x4f\104\105" ? substr($string, 0, $ckey_length) : substr(md5(microtime()), -$ckey_length) : ''; goto FhZ2B; M18am: JYY67: goto o_VrX; GIh8C: $box[$i] = $box[$j]; goto N7Qyc; L0ieu: if ((substr($result, 0, 10) == 0 || substr($result, 0, 10) - time() > 0) && substr($result, 10, 16) == substr(md5(substr($result, 26) . $keyb), 0, 16)) { goto hBXat; } goto Oc0Ap; kEbuA: aefrL: goto CV9kp; m7E0B: $string = $operation == "\104\x45\103\x4f\x44\105" ? base64_decode(substr($string, $ckey_length)) : sprintf("\x25\x30\61\x30\144", $expiry ? $expiry + time() : 0) . substr(md5($string . $keyb), 0, 16) . $string; goto WJdkp; jgvq2: $i = 0; goto WDEnX; mvJoq: $a = $j = $i = 0; goto eZlB1; iNjcb: $j = ($j + $box[$a]) % 256; goto sUv78; sUv78: $tmp = $box[$a]; goto DvGzy; WJdkp: $string_length = strlen($string); goto U4950; s7uEA: $result .= chr(ord($string[$i]) ^ $box[($box[$a] + $box[$j]) % 256]); goto SCtS2; tm6Qi: $key = md5($key != '' ? $key : $GLOBALS["\x5f\x57"]["\143\157\x6e\146\x69\x67"]["\163\145\164\164\151\x6e\x67"]["\141\165\x74\150\153\145\171"]); goto dvCiu; Sf9EK: $j = ($j + $box[$i] + $rndkey[$i]) % 256; goto LlssS; e2ikz: return $keyc . str_replace("\75", '', base64_encode($result)); goto KPV79; eZlB1: MvSw8: goto dE2Pc; CV9kp: if ($operation == "\x44\105\103\117\x44\x45") { goto bGN7_; } goto e2ikz; WDEnX: JAX6A: goto y7443; N7Qyc: $box[$j] = $tmp; goto HAYEs; LlssS: $tmp = $box[$i]; goto GIh8C; nUmam: V0icl: goto OiDBZ; YzFEe: $key_length = strlen($cryptkey); goto m7E0B; V7FMM: return substr($result, 26); goto mYhd8; Us7G4: bGN7_: goto L0ieu; U4950: $result = ''; goto rFan4; OIXLI: goto JYY67; goto DIYnI; mKwmh: goto JAX6A; goto bjXgG; y7443: if (!($i <= 255)) { goto FNfVi; } goto E9tsA; HAYEs: xQouD: goto cQSgm; cQSgm: $i++; goto OIXLI; nCSPD: $rndkey = array(); goto jgvq2; DvGzy: $box[$a] = $box[$j]; goto ktThm; gUrEK: goto s99kk; goto tGdNu; KPV79: goto Nzybx; goto Us7G4; FhZ2B: $cryptkey = $keya . md5($keya . $keyc); goto YzFEe; dE2Pc: if (!($i < $string_length)) { goto aefrL; } goto hQzhO; ALdbo: $j = $i = 0; goto M18am; bjXgG: FNfVi: goto ALdbo; hQzhO: $a = ($a + 1) % 256; goto iNjcb; SCtS2: Ch32M: goto xg8wa; mYhd8: s99kk: goto NgT5z; Oc0Ap: return ''; goto gUrEK; xg8wa: $i++; goto plxjP; ktThm: $box[$j] = $tmp; goto s7uEA; plxjP: goto MvSw8; goto kEbuA; E9tsA: $rndkey[$i] = ord($cryptkey[$i % $key_length]); goto nUmam; DIYnI: ft4ea: goto mvJoq; rFan4: $box = range(0, 255); goto nCSPD; OiDBZ: $i++; goto mKwmh; tGdNu: hBXat: goto V7FMM; NgT5z: Nzybx: goto Fz1Qu; dvCiu: $keya = md5(substr($key, 0, 16)); goto h6b2z; o_VrX: if (!($i < 256)) { goto ft4ea; } goto Sf9EK; FctSA: $ckey_length = 4; goto tm6Qi; h6b2z: $keyb = md5(substr($key, 16, 16)); goto fUy86; Fz1Qu: } goto sjKdp; FgZXY: exit(we7_error(400, $chunk_num)); goto kwLz2; AuAad: $ret["\162\x6f\x6f\x74"]["\156\x61\x6d\x65"] = "\xe6\234\254\345\x9c\260\347\233\256\xe5\275\x95\345\x86\231\xe5\x85\xa5"; goto BVOx9; ZLWjd: function local_salt($length = 8) { goto Tz_0n; ZuwJk: $result .= sha1(uniqid('', true)); goto qdMvE; lWhc3: EI40J: goto YnJFo; Tz_0n: $result = ''; goto lWhc3; qdMvE: goto EI40J; goto roSh0; Htuvd: return substr($result, 0, $length); goto EjDoG; YnJFo: if (!(strlen($result) < $length)) { goto hJ4Gu; } goto ZuwJk; roSh0: hJ4Gu: goto Htuvd; EjDoG: } goto kzRKB; FYZtY: if (empty($code)) { goto McHf3; } goto DCuM6; knzlF: zaK0h: goto ct0Gk; KUW3U: $ret["\144\x61\x74\x61"]["\156\141\x6d\145"] = "\x64\x61\164\141\xe7\233\xae\345\xbd\225\345\x86\231\345\x85\245"; goto UwT_1; ZY7Gs: exit(we7_error(0, array("\164\157\x74\141\154" => $data["\143\x68\x75\x6e\x6b\x5f\164\x6f\x74\x61\154"]))); goto ro2ms; MgopJ: if (!(!file_exists(IA_INSTALL_ROOT . "\57\144\141\164\141\57\143\157\156\146\151\147\56\160\150\x70") || !empty($_POST))) { goto UT1p0; } goto J6ozM; bcAEX: $site = array("\x6b\145\171" => $auth["\x6b\145\x79"], "\164\157\x6b\145\156" => $auth["\x74\157\x6b\145\156"]); goto FU486; ll74o: $forward = $data["\165\x72\x6c"]; goto Y3Ddt; F7gyV: echo "\x3c\x21\144\x6f\x63\x74\x79\x70\x65\40\x68\x74\x6d\x6c\76\xd\xa\x3c\150\164\x6d\x6c\40\x6c\x61\156\147\x3d\x22\x65\x6e\x22\x3e\15\12\x3c\x68\145\x61\144\76\xd\xa\40\x20\x3c\x6d\145\164\x61\x20\143\x68\141\162\x73\145\164\75\x22\165\x74\146\x2d\70\42\x3e\xd\xa\40\40\x3c\164\x69\x74\154\x65\76\x57\x65\x37\111\x6e\163\164\141\154\154\x3c\57\x74\151\x74\154\x65\x3e\xd\xa\x20\x20\74\x62\141\163\145\40\x68\x72\x65\x66\75\x22" . $sitepath . "\x2f\151\156\x73\164\x61\154\154\x2e\160\150\x70\x22\76\15\xa\xd\xa\x20\40\x3c\x6d\x65\x74\x61\40\x6e\x61\155\145\x3d\42\166\x69\145\167\x70\x6f\162\164\x22\40\x63\157\156\164\145\x6e\x74\75\42\167\151\x64\x74\x68\x3d\144\x65\166\x69\x63\145\55\167\x69\x64\x74\x68\54\40\151\156\151\x74\x69\141\x6c\x2d\x73\143\x61\154\145\x3d\61\x22\x3e\xd\12\x20\x20\74\x6c\x69\x6e\153\40\x72\145\x6c\75\x22\151\143\x6f\156\x22\40\x74\171\x70\145\x3d\x22\151\155\141\x67\145\x2f\x78\55\151\143\x6f\156\x22\40\x68\x72\145\x66\x3d\x2f\x2f\143\x64\156\x2e\167\67\56\143\143\x2f\x77\145\x37\x2d\151\156\163\164\141\154\154\57\146\141\166\x69\143\157\156\56\151\x63\x6f\x22\x3e\15\12\74\x6c\x69\156\153\40\x72\x65\x6c\x3d\x22\x73\x74\x79\154\145\x73\150\145\145\x74\x22\x20\150\x72\x65\x66\75\x22\x2f\57\x63\144\156\x2e\x77\x37\x2e\143\143\x2f\167\145\67\55\x69\x6e\163\x74\141\x6c\x6c\57\163\x74\x79\x6c\x65\x73\x2e\143\163\163\x3f\166\x3d" . time() . "\42\76\x3c\x2f\x68\145\x61\144\x3e\xd\12\x3c\142\x6f\x64\x79\x3e\15\12\x20\40\x3c\141\x70\160\x2d\x72\x6f\x6f\164\76\x3c\x2f\141\x70\x70\x2d\162\157\157\x74\76\xd\12\x3c\163\143\x72\151\x70\164\x20\164\x79\x70\x65\75\42\x74\145\x78\164\57\152\x61\166\141\163\143\162\151\x70\164\x22\40\163\x72\x63\75\42\x2f\x2f\x63\144\x6e\x2e\x77\67\x2e\143\x63\57\x77\x65\x37\x2d\151\156\163\164\x61\x6c\x6c\x2f\162\165\156\x74\151\x6d\145\56\152\x73\77\x76\x3d" . time() . "\x22\x3e\74\x2f\x73\143\x72\x69\160\x74\x3e\74\x73\143\162\151\160\x74\40\164\x79\160\145\75\x22\x74\x65\x78\164\57\x6a\x61\x76\x61\163\143\162\x69\160\164\x22\x20\163\x72\x63\x3d\42\57\x2f\143\144\x6e\x2e\167\67\56\143\x63\57\x77\x65\67\55\x69\156\x73\164\x61\x6c\x6c\57\160\x6f\154\x79\x66\x69\154\x6c\x73\x2e\x6a\x73\77\166\75" . time() . "\x22\x3e\74\57\x73\143\x72\x69\160\x74\x3e\x3c\163\x63\x72\x69\x70\x74\x20\x74\171\x70\145\75\x22\x74\x65\x78\164\57\152\x61\166\x61\x73\143\x72\x69\x70\x74\42\40\x73\162\143\x3d\x22\x2f\x2f\143\144\156\56\x77\67\56\x63\143\x2f\167\x65\67\x2d\x69\x6e\x73\164\x61\x6c\x6c\x2f\155\141\151\156\x2e\152\163\77\166\75" . time() . "\42\x3e\74\x2f\x73\x63\x72\x69\160\164\76\x3c\57\142\x6f\x64\x79\76\15\12\x3c\x2f\x68\164\x6d\154\76"; goto z0qBJ; eSb3h: exit(we7_error(430, $register_site_result)); goto iborP; FHyky: $ret["\x61\x6c\x77\141\x79\163\x5f\160\157\x70\165\154\141\x74\x65\137\162\x61\x77\x5f\x70\x6f\x73\164\x5f\144\141\x74\x61"]["\x66\141\x69\x6c\x65\144"] = @ini_get("\x61\x6c\167\x61\171\x73\137\x70\x6f\x70\165\x6c\141\x74\x65\x5f\162\x61\x77\137\160\157\x73\164\137\x64\x61\164\x61") != "\55\61"; goto W6EUg; Qa2Lj: $action = trim($_GET["\163\164\145\x70"]); goto DsWmC; AfbyC: $ret["\166\x65\x72\163\151\x6f\x6e"]["\x66\x61\x69\x6c\x65\x64"] = true; goto cUy5j; J8Kj9: UT1p0: goto loxEJ; s1JXH: Qt921: goto j20nS; lngGc: if (!($action == "\157\141\x75\x74\x68")) { goto s1BVI; } goto ZcVUE; dfYdg: $ret["\165\160\154\x6f\x61\x64"]["\156\141\x6d\x65"] = "\xe4\270\x8a\xe4\xbc\xa0\xe9\x99\220\xe5\x88\266"; goto N7QwO; IFARL: function we7_update_sitename($sitename) { goto zJgE4; OwN6e: goto LmnLw; goto OW5kQ; kGcij: if (is_array($data) && isset($data["\x65\x72\x72\157\x72"])) { goto hphxk; } goto r3_3n; dcH7C: qoTLd: goto HnNp1; r3_3n: return true; goto OwN6e; vQd2g: $site_info = setting_load("\163\151\x74\x65"); goto D0FOj; OW5kQ: hphxk: goto zAq6z; HnNp1: $data = we7_request_api(API_UPDATE_SITENAME, array("\x61\143\143\145\163\x73\137\164\x6f\x6b\x65\156" => $accesstoken, "\163\x69\164\x65\137\156\x61\x6d\x65" => $sitename, "\x73\151\164\145\137\153\x65\x79" => $site_info["\x73\x69\164\x65"]["\153\x65\x79"])); goto kGcij; zJgE4: global $accesstoken, $_W; goto vQd2g; zAq6z: return $data["\145\162\x72\157\x72"]; goto U4Af0; D0FOj: if (!(empty($site_info["\x73\x69\x74\145"]) || empty($site_info["\163\x69\164\145"]["\x6b\x65\171"]))) { goto qoTLd; } goto UClws; U4Af0: LmnLw: goto v12vA; UClws: return "\xe7\253\x99\347\202\xb9\xe4\xbf\241\346\x81\257\xe4\xb8\215\345\255\230\xe5\x9c\xa8\357\xbc\x8c\350\257\xb7\351\207\215\346\226\260\xe6\xb3\xa8\345\x86\x8c\347\253\x99\xe7\202\271\x2e"; goto dcH7C; v12vA: } goto wkIJo; OYCTd: header("\x6c\157\x63\141\164\151\x6f\x6e\x3a\40\x2e\57\151\x6e\144\x65\x78\56\x70\x68\x70"); goto TMN29; C3oLa: qeMW4: goto MM4BP; Cm8pU: DhM4N: goto viwF2; maRVm: pwYoB: goto amuF1; N8G0z: function we7_db() { goto wEPUM; H_R9s: require IA_INSTALL_ROOT . "\57\144\141\164\141\57\x63\157\x6e\146\151\x67\56\x70\x68\160"; goto OkdSa; dI0dS: foreach ($all_engines as $engine) { goto Fx__F; Fx__F: if (!(strtolower($engine["\x45\x6e\147\151\156\145"]) == "\151\156\x6e\x6f\x64\142" && in_array(strtolower($engine["\x53\165\160\160\157\162\x74"]), array("\144\145\x66\141\x75\x6c\164", "\x79\145\x73")))) { goto V6HRw; } goto yU8lQ; AEbmD: V6HRw: goto F82tN; F82tN: gDNAQ: goto fGxRV; yU8lQ: $support_innodb = true; goto AEbmD; fGxRV: } goto ZyeqZ; mCaPL: $link->exec("\x49\116\123\x45\122\124\40\111\x4e\x54\x4f\40{$db["\x70\162\145\146\x69\x78"]}\x75\163\145\x72\x73\x20\x28\x75\x73\145\x72\156\x61\155\145\x2c\40\160\141\163\x73\x77\157\x72\144\x2c\x20\x73\x61\x6c\164\x2c\40\152\x6f\151\x6e\x64\x61\x74\x65\54\40\x67\x72\157\x75\x70\x69\144\x2c\x20\163\x74\x61\x74\165\x73\51\x20\x56\101\114\125\105\123\50\x27{$user["\165\x73\x65\x72\156\x61\x6d\x65"]}\x27\54\x20\47{$password}\47\x2c\40\47{$salt}\47\54\x20\x27" . time() . "\x27\54\x20\x31\x2c\x20\62\51"); goto U2MWU; ni4Tk: $password = sha1("{$user["\x70\141\163\163\x77\157\x72\x64"]}\x2d{$salt}\55{$authkey}"); goto mCaPL; Nx9f5: $cookie["\165\x69\x64"] = $link->lastInsertId(); goto eDkqZ; bjqUP: $dat = (require $dbfile); goto TiGca; TiGca: if (!(empty($dat) || !is_array($dat))) { goto NDVJT; } goto RxMuz; yvjF7: $all_engines = $engines->fetchAll(); goto dI0dS; URs4v: return true; goto pLPpD; UmkuP: foreach ($dat["\144\x61\164\x61\163"] as $data) { local_run($data, $link, $db); SZNzU: } goto hi3HI; eDkqZ: $cookie["\x68\x61\x73\x68"] = md5($password . $salt); goto NJmOR; OkdSa: $db = array("\x73\x65\x72\x76\145\162" => $config["\144\x62"]["\155\x61\163\164\x65\x72"]["\150\157\x73\x74"], "\160\157\162\164" => $config["\x64\142"]["\155\x61\163\164\145\162"]["\160\x6f\x72\164"], "\x75\163\145\x72\156\x61\155\145" => $config["\144\x62"]["\x6d\x61\x73\164\145\x72"]["\165\163\145\x72\156\141\155\x65"], "\x70\141\163\163\167\157\x72\144" => $config["\144\x62"]["\155\141\x73\x74\x65\x72"]["\x70\x61\163\x73\167\x6f\162\144"], "\160\x72\145\146\151\170" => $config["\144\x62"]["\155\x61\163\164\145\x72"]["\x74\x61\x62\154\x65\x70\162\x65"], "\x6e\141\155\x65" => $config["\x64\x62"]["\155\x61\x73\x74\x65\x72"]["\x64\x61\164\x61\142\x61\163\145"]); goto DF4T7; UnY4D: $link = new PDO("\x6d\171\x73\x71\154\x3a\144\x62\x6e\x61\155\145\x3d{$db["\x6e\141\155\x65"]}\x3b\150\157\163\164\75{$db["\x73\x65\x72\166\145\162"]}\73\160\157\162\x74\75{$db["\160\x6f\162\164"]}", $db["\165\x73\145\x72\x6e\141\155\x65"], $db["\x70\x61\163\x73\x77\x6f\x72\x64"]); goto u9joa; N2Xvo: $support_innodb = false; goto K292c; D7Ii8: GKNK4: goto XdR1m; NJmOR: $session = install_authcode(json_encode($cookie), "\x65\156\143\x6f\144\145", $authkey); goto SuEfi; hi3HI: R4JOA: goto D7Ii8; r3eXI: $authkey = $config["\x73\x65\164\164\x69\156\147"]["\141\165\x74\x68\153\x65\x79"]; goto UnY4D; wpVBw: foreach ($dat["\x73\x63\150\145\x6d\x61\x73"] as $schema) { goto WNQfG; WNQfG: $sql = local_create_sql($schema, $support_innodb); goto J86V9; zdfjP: PYbph: goto u4rXt; J86V9: local_run($sql, $link, $db); goto zdfjP; u4rXt: } goto W4q07; SuEfi: $secure = $is_https ? 1 : 0; goto FPNJj; jzD7k: $link->exec("\123\105\x54\x20\163\161\x6c\x5f\155\x6f\x64\145\x3d\x27\47"); goto VqU51; ZyeqZ: Ntgxo: goto wpVBw; DKOsf: NDVJT: goto N2Xvo; RxMuz: return "\345\xae\211\xe8\243\205\xe5\x8c\205\xe4\270\x8d\346\255\243\xe7\xa1\xae\54\40\xe6\x95\xb0\346\x8d\256\xe5\xae\x89\xe8\243\x85\xe8\204\232\xe6\234\xac\xe7\274\xba\345\244\261\x2e"; goto DKOsf; u9joa: $link->exec("\123\x45\124\x20\x63\x68\141\162\141\x63\x74\x65\162\137\163\145\x74\x5f\x63\x6f\156\x6e\x65\143\164\x69\157\x6e\75\165\x74\x66\x38\x2c\x20\143\x68\x61\x72\141\x63\x74\x65\x72\x5f\x73\145\164\137\x72\145\x73\x75\154\x74\x73\x3d\x75\x74\146\x38\54\x20\143\x68\141\162\141\143\164\145\x72\x5f\x73\145\164\137\x63\154\x69\145\156\x74\x3d\142\x69\156\x61\x72\x79"); goto jzD7k; VqU51: $dbfile = IA_INSTALL_ROOT . "\57\x64\x61\164\x61\x2f\144\x62\x2e\x70\150\160"; goto lPue7; DAPUi: eJvl_: goto bjqUP; lPue7: if (file_exists(IA_INSTALL_ROOT . "\x2f\151\x6e\144\145\x78\x2e\x70\150\160") && is_dir(IA_INSTALL_ROOT . "\57\x77\x65\142") && file_exists(IA_INSTALL_ROOT . "\x2f\146\x72\x61\155\145\167\157\x72\153\x2f\x76\145\x72\x73\x69\x6f\156\56\151\x6e\143\56\x70\x68\x70") && file_exists($dbfile)) { goto eJvl_; } goto IDycs; K292c: $engines = $link->query("\123\x48\x4f\x57\x20\105\x4e\107\x49\116\x45\123\73"); goto yvjF7; XdR1m: $user = array("\165\x73\145\162\x6e\141\x6d\x65" => "\141\x64\155\151\x6e", "\x70\141\x73\x73\167\x6f\162\144" => "\61\62\63\x34\65\66"); goto PTmei; PTmei: $salt = local_salt(8); goto ni4Tk; W4q07: woQ1d: goto UmkuP; O3PqD: define("\111\116\x5f\x49\x41", true); goto H_R9s; FPNJj: setcookie("{$cookiepre}\x5f\x5f\x73\145\x73\x73\151\157\x6e", $session, 0, "\57", '', $secure, true); goto URs4v; sPRwV: goto GKNK4; goto DAPUi; DF4T7: $cookiepre = $config["\x63\157\x6f\x6b\151\x65"]["\x70\162\x65"]; goto r3eXI; U2MWU: $cookie = array("\154\x61\x73\164\x76\151\x73\x69\164" => '', "\154\141\x73\x74\x69\x70" => ''); goto Nx9f5; wEPUM: global $is_https; goto O3PqD; IDycs: return "\xe5\256\x89\350\243\205\xe5\214\205\xe4\xb8\x8d\xe6\xad\243\xe7\xa1\256\56"; goto sPRwV; pLPpD: } goto ZXSa9; GXqXx: $ret["\x61\x73\160\137\x74\141\x67\163"]["\x72\145\x73\165\154\x74"] = "\141\x73\160\137\x74\141\x67\163\xe5\274\x80\345\220\xaf\347\x8a\266\346\x80\201"; goto vyAke; LRY2D: if (!(!empty($auth["\165\162\x6c"]) && $auth["\165\162\154"] == $siteroot)) { goto WLGy9; } goto ss2Lr; ryAAB: ob_start(); goto psuLj; ZcVUE: $code = trim($_GET["\143\x6f\144\x65"]); goto FYZtY; ibEoF: $database_result = we7_db(); goto sENJ1; EoNDi: viYQT: goto WkbcB; PUNDJ: exit; goto KrWTl; kxn_Q: EbIc8: goto C3oLa; PQVII: $sitename = trim($_POST["\x73\151\164\145\156\x61\155\145"]); goto pBzvQ; iJPft: define("\101\120\x49\137\x47\105\124\x5f\103\110\x55\x4e\x4b\137\x50\x41\x43\x4b\101\107\x45", API_HOST . "\x2f\165\164\x69\154\57\160\141\x63\153\141\x67\x65\57\151\x6e\163\x74\141\154\x6c"); goto CUGN2; pHV1S: $ret["\146\x6f\160\145\156"]["\157\x6b"] = @ini_get("\x61\154\154\x6f\167\x5f\x75\162\x6c\137\x66\x6f\160\x65\156") && function_exists("\146\x73\x6f\143\x6b\x6f\x70\x65\156"); goto YtddG; Z5SL_: $ret["\141\x73\160\137\164\141\x67\x73"]["\x66\141\151\154\145\144"] = true; goto kHvru; n5FPd: header("\114\x6f\x63\x61\164\151\157\156\72\40" . $siteroot . "\x2f\x69\156\163\x74\141\154\154\x2e\x70\x68\x70"); goto PUNDJ; Ku_RH: $post = file_get_contents("\x70\x68\160\x3a\x2f\x2f\151\156\x70\165\x74"); goto ncGgN; SiH6p: function we7_http_response_parse($data) { goto qUmfS; myL4o: if (!($isgzip && function_exists("\x67\172\144\x65\x63\157\x64\x65"))) { goto dHRRm; } goto maiTV; Yocom: K1ipP: goto OVZKu; bDl_5: $header = explode("\xd\xa", $split2[1]); goto rKpuP; wyNK7: $split1[0] = substr($data, 0, $pos); goto wtHrr; wtHrr: $split1[1] = substr($data, $pos + 4, strlen($data)); goto P6MdG; eRgfV: if (!($rlt["\x63\157\144\x65"] == "\61\x30\60")) { goto YkJUs; } goto KeSBo; tTU7i: $pos = strpos($data, "\xd\xa\xd\xa"); goto wyNK7; P6MdG: $split2 = explode("\15\12", $split1[0], 2); goto m3yx3; xRY6p: dHRRm: goto jE4cN; hgXac: $rlt["\x63\x6f\144\x65"] = !empty($matches[2]) ? $matches[2] : 200; goto NVxXz; tLsb1: foreach ($header as $v) { goto NGBSd; RinwS: wdxBT: goto Wt2r2; XKl1a: if (!(!$isgzip && strtolower($key) == "\143\157\156\164\145\156\164\55\x65\x6e\143\x6f\144\151\x6e\147" && strtolower($value) == "\x67\172\151\160")) { goto wdxBT; } goto bA3Nt; aPn_n: $key = substr($v, 0, $pos); goto dDHYA; ZAMeY: jfGx_: goto WG_Mk; Wt2r2: oCGSQ: goto HGkJG; Dkf4e: goto Z5dK0; goto f7kXf; KrgJE: goto Z5dK0; goto ZAMeY; yZRuY: $rlt["\x68\x65\x61\x64\x65\162\x73"][$key][] = $value; goto TmIdh; hYbkE: $rlt["\x68\145\141\x64\x65\162\x73"][$key][] = $temp; goto yZRuY; Wnsw0: if (!empty($rlt["\x68\x65\141\x64\x65\x72\x73"][$key])) { goto jfGx_; } goto x30dH; f7kXf: ljfZw: goto w395l; ddpQj: if (is_array($rlt["\150\x65\x61\144\145\162\x73"][$key])) { goto ljfZw; } goto Wnsw0; NGBSd: $pos = strpos($v, "\x3a"); goto aPn_n; bA3Nt: $isgzip = true; goto RinwS; TmIdh: Z5dK0: goto XKl1a; NAjwQ: unset($rlt["\x68\x65\x61\144\x65\162\163"][$key]); goto hYbkE; WG_Mk: $temp = $rlt["\x68\x65\x61\144\145\162\163"][$key]; goto NAjwQ; x30dH: $rlt["\x68\x65\141\x64\x65\x72\163"][$key] = $value; goto Dkf4e; dDHYA: $value = trim(substr($v, $pos + 1)); goto ddpQj; w395l: $rlt["\x68\145\141\x64\x65\x72\163"][$key][] = $value; goto KrgJE; HGkJG: } goto Yocom; gdhLk: $rlt["\162\x65\163\160\x6f\156\x73\x65\x6c\x69\156\145"] = !empty($split2[0]) ? $split2[0] : ''; goto bDl_5; KeSBo: return we7_http_response_parse($rlt["\x63\157\156\164\x65\x6e\x74"]); goto CcEiT; maiTV: $rlt["\x63\157\156\x74\145\x6e\x74"] = gzdecode($rlt["\143\157\156\164\145\156\164"]); goto xRY6p; sHzFu: return $rlt; goto OfYFI; rKpuP: $isgzip = false; goto tLsb1; jE4cN: $rlt["\x6d\x65\x74\x61"] = $data; goto eRgfV; OVZKu: $rlt["\143\157\x6e\x74\145\x6e\164"] = $split1[1]; goto myL4o; m3yx3: preg_match("\57\x5e\50\x5c\x53\x2b\51\40\x28\x5c\123\x2b\51\40\50\56\52\x29\x24\x2f", $split2[0], $matches); goto hgXac; qUmfS: $rlt = array(); goto tTU7i; CcEiT: YkJUs: goto sHzFu; NVxXz: $rlt["\x73\x74\x61\164\x75\x73"] = !empty($matches[3]) ? $matches[3] : "\x4f\x4b"; goto gdhLk; OfYFI: } goto Ypseu; zcKpM: if (!file_exists(IA_INSTALL_ROOT . "\x2f\143\x68\x75\156\x6b\137" . $chunk_num)) { goto maeB4; } goto cnRC1; PXGLc: if ($result) { goto gbw1W; } goto FgZXY; iborP: KmNyL: goto WSeZ9; UflG0: oxOzW: goto FjsFX; ss2Lr: define("\111\x4e\x5f\x53\131\x53", true); goto uHuSJ; kiqXy: $password = trim($_POST["\160\141\x73\x73\167\x6f\162\144"]); goto jZR1Y; a8NCu: $ret["\162\157\157\164"]["\x66\141\151\154\x65\x64"] = true; goto AuAad; F5IFO: $ret["\144\x61\x74\141"]["\157\x6b"] = local_writeable(IA_INSTALL_ROOT . "\x2f\x64\x61\x74\x61"); goto d1RzT; j20nS: $i++; goto mUKPg; J7x3Y: jf6kE: goto zza2f; VTWND: if (!($sitename != $siteroot . "\347\232\x84\xe7\253\231\xe7\202\xb9")) { goto viYQT; } goto dmFBf; MM4BP: exit(we7_error(0, $chunk_num)); goto YaxbS; fvrX_: function we7_finish() { goto jzmI2; vk9Q6: @unlink(IA_INSTALL_ROOT . "\x2f\x64\141\164\x61\x2f\x64\142\56\154\x6f\x63\153"); goto nUi6c; TBzD8: require IA_INSTALL_ROOT . "\x2f\167\145\142\57\x63\x6f\x6d\155\x6f\x6e\x2f\142\157\x6f\x74\163\164\162\x61\160\56\163\x79\x73\56\x69\156\143\x2e\x70\150\160"; goto GIif5; wxOrC: load()->web("\x63\157\x6d\155\x6f\156"); goto G2GGT; FLRrs: load()->model("\163\145\164\164\151\x6e\x67"); goto H1ojX; qdsXx: cache_build_module_subscribe_type(); goto LZEpq; oWpbO: we7_setcookie("\143\x68\165\156\153\x5f\164\x6f\x74\x61\154", '', -10); goto jIWib; ZiZ3W: cache_build_users_struct(); goto qdsXx; G2GGT: load()->web("\x74\145\155\160\x6c\141\x74\x65"); goto FLRrs; jIWib: @unlink(IA_INSTALL_ROOT . "\x2f\144\141\x74\141\57\x64\x62\56\x70\x68\x70"); goto vk9Q6; jzmI2: global $_W; goto QSaKG; H1ojX: load()->model("\143\141\143\150\145"); goto jYexf; QSaKG: we7_setcookie("\x70\x61\143\153\x61\147\x65\137\x6d\144\65", '', -10); goto oWpbO; LZEpq: return true; goto kYHXY; Njf6K: require IA_INSTALL_ROOT . "\x2f\x66\162\x61\155\x65\167\157\162\x6b\x2f\142\x6f\157\164\163\164\162\141\160\x2e\151\x6e\x63\x2e\x70\150\160"; goto TBzD8; jYexf: cache_build_frame_menu(); goto Ev6ua; nUi6c: define("\x49\116\x5f\123\x59\x53", true); goto Njf6K; Ev6ua: cache_build_setting(); goto ZiZ3W; GIif5: $_W["\x75\151\x64"] = $_W["\151\x73\x66\x6f\165\x6e\x64\x65\x72"] = 1; goto wxOrC; kYHXY: } goto X7SAx; G62ZE: y39Hu: goto S8MmX; pBPHe: $ret["\x61\x73\x70\x5f\x74\x61\147\x73"]["\157\x6b"] = ini_get("\x61\x73\x70\x5f\164\x61\147\163"); goto RXSRJ; pzGro: YzvP_: goto zcKpM; ERdeB: function we7_setcookie($key, $value) { goto CMNrR; CMNrR: $secure = $_SERVER["\123\105\x52\126\x45\x52\137\x50\117\122\124"] == 443 ? 1 : 0; goto PegYc; X3F3V: $value = json_encode($value); goto YCdD0; PegYc: if (!is_array($value)) { goto QbYu5; } goto X3F3V; YCdD0: QbYu5: goto tkhYN; tkhYN: return setcookie(COOKIE_PRE . $key, $value, 0, '', '', $secure, true); goto DOyyG; DOyyG: } goto ccJ2g; syA7N: if ($sitename_result) { goto SPjFk; } goto MvqNC; WgZXt: if ($data["\145\x72\162\157\162"] == 401) { goto DqDz_; } goto QErCY; gn6iD: $sitepath = substr($_SERVER["\x50\110\120\137\x53\105\x4c\106"], 0, strrpos($_SERVER["\120\x48\x50\x5f\123\105\x4c\x46"], "\x2f")); goto d4mKi; aB_4d: $db_prefix = !empty($db_prefix) ? $db_prefix : "\151\155\163\137"; goto aMCrz; RXSRJ: if (!(!empty($ret["\141\163\160\137\164\141\147\x73"]["\x6f\x6b"]) && strtolower($ret["\141\163\x70\x5f\164\x61\147\163"]["\157\153"]) == "\157\156")) { goto fNlrv; } goto Z5SL_; M6nF6: B8b2p: goto cLKOh; WJWUi: if ($data["\145\162\162\157\x72"] == 401) { goto vJo8Q; } goto bbor7; xi_yV: if (!(is_array($data) && isset($data["\x65\x72\162\157\x72"]))) { goto DhM4N; } goto WJWUi; Tw9pN: iztoP: goto EghIk; GYMbG: define("\101\120\111\x5f\117\x41\x55\x54\110\137\x4c\x4f\107\x49\116\x5f\125\122\x4c", API_HOST . "\57\x6f\141\x75\164\x68\57\x6c\157\147\151\156\x2d\165\x72\x6c\57\151\x6e\144\x65\x78"); goto eBxD6; OSCSq: WLGy9: goto Z9CE2; Cly9y: BdRrd: goto tqqzx; C0wzc: define("\x43\117\117\x4b\111\x45\x5f\x50\x52\x45", "\x77\x65\67\x69\x6e\x73\164\141\x6c\x6c\x5f"); goto sR3HM; ncGgN: $auth = @json_decode(base64_decode($post), true); goto LRY2D; q9Jpu: if (!($action == "\162\145\147\151\163\x74\145\x72\137\x63\x61\x6c\154\142\x61\143\153")) { goto iztoP; } goto Ku_RH; d1RzT: if ($ret["\x64\141\x74\141"]["\157\153"]) { goto qJV1k; } goto BHR5Q; QBs03: exit; goto ToZXQ; xV0BG: function we7_handle_chunk() { goto uIQAy; QHIPq: $zip->extractTo(IA_INSTALL_ROOT); goto wHHx2; vh1OT: L4uPm: goto lQRSb; lQRSb: $i++; goto rqucY; tweTR: $i = 1; goto bhOan; hPix8: if ($res === TRUE) { goto aefGZ; } goto DvgAp; Aj773: f53bn: goto K7Pfn; gvquQ: return $result; goto bhVqD; pLEcg: goto Q5MjU; goto feCpa; rPr81: iAbej: goto gvquQ; aCAGV: if (!($result === false)) { goto iAbej; } goto gZySX; cCMIG: $filename = "\x2e\x2f\143\x68\x75\x6e\x6b\x5f" . $i; goto J2mYS; ax18q: TlQ_k: goto J7LR0; rqucY: goto tPrOJ; goto ezvX5; At9w8: $i = 1; goto Aj773; FpcrG: if (!(file_exists($tmpfile) && $package_md5 === md5_file($tmpfile))) { goto DfaXC; } goto akM0z; JoG74: $tmpfile = "\56\57\167\x65\67\x73\x6f\x75\162\x63\x65\x2e\172\x69\160"; goto otfUB; DvgAp: $result = false; goto O6wb2; AitUI: $res = $zip->open($tmpfile); goto hPix8; zSFpn: $i++; goto hAtXq; feCpa: joLoy: goto Ts_Or; D95Kc: @unlink("\x2e\57" . $tmpfile); goto tweTR; UNbsY: b8bb3: goto y4VAt; hAtXq: goto f53bn; goto UNbsY; uIQAy: $package_md5 = we7_getcookie("\x70\x61\143\153\x61\x67\145\x5f\x6d\x64\65"); goto JoG74; J2mYS: if (file_exists($filename)) { goto joLoy; } goto pLEcg; J7LR0: DfaXC: goto D95Kc; otfUB: $chunk_num = we7_getcookie("\x63\150\165\x6e\153\x5f\x74\x6f\x74\x61\154"); goto At9w8; YCcSe: Q5MjU: goto zSFpn; O6wb2: goto TlQ_k; goto wfKx7; Twtru: if (!($i <= $chunk_num)) { goto nWkQF; } goto gORvK; y4VAt: $result = true; goto FpcrG; akM0z: $zip = new ZipArchive(); goto AitUI; gZySX: return "\345\xae\x89\xe8\243\205\345\214\205\xe4\270\215\xe6\255\xa3\xe7\xa1\256"; goto rPr81; K7Pfn: if (!($i <= $chunk_num)) { goto b8bb3; } goto cCMIG; gORvK: @unlink("\56\57\143\150\165\x6e\153\x5f" . $i); goto vh1OT; Ts_Or: file_put_contents($tmpfile, file_get_contents($filename), FILE_APPEND); goto YCcSe; ezvX5: nWkQF: goto aCAGV; wHHx2: $zip->close(); goto ax18q; bhOan: tPrOJ: goto Twtru; wfKx7: aefGZ: goto QHIPq; bhVqD: } goto uAbuZ; IqYpF: DqDz_: goto LSiMI; cnRC1: exit(we7_error(0, $chunk_num)); goto H9sCu; Ajpqi: if (file_exists(IA_INSTALL_ROOT . "\57\151\156\144\145\170\56\160\x68\x70") && is_dir(IA_INSTALL_ROOT . "\x2f\167\145\x62") && file_exists($verfile) && file_exists($dbfile)) { goto UpKxQ; } goto fXPBB; MBZt8: $db_password = trim($_POST["\x70\141\x73\x73\167\157\x72\x64"]); goto VXPxU; KCv1W: $user_result = we7_update_user($username, $password); goto TCi_e; EVpKj: $register_site_result = we7_register_site(); goto vdzav; tqqzx: if (!($chunk_num > $chunk_total)) { goto YzvP_; } goto j02am; oSA0L: function we7_upgrade() { goto vvvq6; RuRD2: return true; goto p7JiE; p4xWB: if (!(!empty($packet["\x66\x69\x6c\145\163"]) && is_array($packet["\146\151\154\x65\x73"]))) { goto Ix6em; } goto hjRpD; RaHap: $cversion = IMS_VERSION; goto ewgeT; anXNO: if (empty($updatefiles)) { goto BaymN; } goto cxlH9; k4iq8: if (!(!empty($packet["\x73\x63\x72\x69\160\x74\163"]) && is_array($packet["\x73\x63\162\x69\x70\164\x73"]))) { goto Czosb; } goto zDYRY; jm4FE: $packet = cloud_build(); goto FYTPk; ewgeT: $crelease = IMS_RELEASE_DATE; goto V5vHp; Ez_dE: require IA_INSTALL_ROOT . "\57\x77\x65\142\57\x63\157\155\x6d\157\156\x2f\142\157\x6f\164\x73\164\x72\141\160\x2e\x73\x79\163\56\x69\156\x63\56\160\x68\x70"; goto qbkV_; vvvq6: global $_W; goto PyqXX; FFpPD: foreach ($packet["\163\x63\150\x65\155\141\163"] as $schema) { goto yA1pi; yKA61: SyBt5: goto YWify; twh0G: foreach ($sqls as $sql) { pdo_query($sql); az4Cq: } goto K51JD; K51JD: KF7NV: goto yKA61; XvSEZ: $local = db_table_schema(pdo(), $tablename); goto ZfWE2; ZfWE2: $sqls = db_table_fix_sql($local, $schema); goto twh0G; yA1pi: $tablename = substr($schema["\164\141\142\x6c\x65\x6e\x61\x6d\x65"], 4); goto XvSEZ; YWify: } goto H1AdN; FYTPk: if (!empty($packet)) { goto gQtxA; } goto SoWs3; nljd4: require IA_INSTALL_ROOT . "\57\146\162\x61\x6d\x65\x77\x6f\x72\153\x2f\x62\157\x6f\x74\163\164\x72\141\x70\x2e\151\156\143\x2e\160\x68\x70"; goto Ez_dE; krp0e: BaymN: goto v2Ujx; GEyUF: gQtxA: goto p4xWB; OWF00: Ix6em: goto cOWzb; PyqXX: define("\111\x4e\137\123\131\123", true); goto nljd4; VQZ_J: load()->func("\x64\x62"); goto qYeK5; zDYRY: $updatefiles = array(); goto ml9AV; SoWs3: return true; goto GEyUF; blt5v: FoJS5: goto anXNO; v2Ujx: Czosb: goto RuRD2; RxPYY: rmdirs($updatedir, true); goto G7NYT; ml9AV: $updatedir = IA_INSTALL_ROOT . "\57\x64\141\x74\x61\x2f\x75\160\144\x61\164\x65\x2f"; goto RxPYY; Mu0Un: ksJ8g: goto k4iq8; H1AdN: XXUem: goto Mu0Un; lS2th: Ropz_: goto krp0e; hjRpD: foreach ($packet["\146\x69\154\x65\x73"] as $file) { cloud_download($file, "\x66\151\154\145\x73"); W2347: } goto lHoGj; cOWzb: if (!(!empty($packet["\163\143\x68\145\155\141\x73"]) && is_array($packet["\x73\x63\x68\x65\x6d\x61\163"]))) { goto ksJ8g; } goto FFpPD; lHoGj: DrETZ: goto OWF00; qbkV_: load()->model("\x63\154\157\165\144"); goto VQZ_J; G7NYT: mkdirs($updatedir); goto RaHap; cxlH9: foreach ($updatefiles as $file) { goto a3El4; Uovxy: L6XZV: goto a1MCi; jcU2C: $evalret = (include $entry); goto ZRg3R; nsXM9: fzZl0: goto Uovxy; ktk5z: FNDyh: goto jcU2C; a3El4: if (!(!is_file($file) || !preg_match("\x2f\x5e\165\160\x64\141\x74\145\134\50\x5c\144\x7b\x31\x32\175\x5c\x2d\x5c\x64\173\x31\x32\x7d\134\x29\134\x2e\x70\x68\x70\44\57", $file))) { goto FNDyh; } goto z_HHO; VAh4p: cache_build_users_struct(); goto N3DpE; z_HHO: goto L6XZV; goto ktk5z; ZRg3R: if (empty($evalret)) { goto fzZl0; } goto VAh4p; wWWcB: @unlink($entry); goto nsXM9; N3DpE: cache_build_setting(); goto wWWcB; a1MCi: } goto lS2th; V5vHp: foreach ($packet["\163\x63\162\151\x70\164\x73"] as $script) { goto fbyr2; eRDIW: kbIKm: goto Qvxsm; XPWWq: $script["\163\143\x72\x69\x70\164"] = <<<DAT
<?php
load()->model('setting');
setting_upgrade_version('{$packet["\x66\x61\x6d\151\154\171"]}', '{$script["\166\145\x72\163\151\157\156"]}', '{$script["\162\145\x6c\x65\x61\163\x65"]}');
return true;
DAT;
goto otnoy; wc3N1: $script["\163\x63\x72\151\x70\164"] = @base64_decode($script["\x73\143\162\x69\x70\x74"]); goto d_5dU; VXTNv: file_put_contents($updatefile, $script["\x73\143\x72\151\x70\x74"]); goto MQl24; otnoy: WD_i3: goto Klqcs; BBDqF: $crelease = $script["\x72\x65\x6c\x65\141\163\145"]; goto wc3N1; JtB2y: wbu87: goto NuY2A; d_5dU: if (!empty($script["\x73\143\162\151\160\164"])) { goto WD_i3; } goto XPWWq; Klqcs: $updatefile = $updatedir . $fname; goto VXTNv; fbyr2: if (!($script["\162\145\x6c\x65\141\163\x65"] <= $crelease)) { goto kbIKm; } goto a0Lbn; MQl24: $updatefiles[] = $updatefile; goto JtB2y; a0Lbn: goto wbu87; goto eRDIW; Qvxsm: $fname = "\165\x70\144\141\164\145\50{$crelease}\x2d{$script["\162\x65\x6c\x65\x61\x73\145"]}\x29\56\x70\x68\x70"; goto BBDqF; NuY2A: } goto blt5v; qYeK5: load()->func("\146\151\154\145"); goto jm4FE; p7JiE: } goto IFARL; cqqVD: nXi0p: goto pUSQX; xNEhq: if (!($server["\x75\160\x6c\x6f\141\x64"] == "\165\156\x6b\156\x6f\x77" || !strstr($server["\165\x70\x6c\x6f\141\144"], "\x6d"))) { goto O_02J; } goto GFydd; sCqmc: RUpmP: goto Ff40Y; NPynU: $result = array(); goto SrdvD; Gm8fl: s4mbv: goto ll74o; GFydd: $ret["\x75\x70\154\x6f\x61\x64"]["\146\x61\x69\154\x65\144"] = true; goto dfYdg; ieTB8: HhCml: goto cmzrk; n7uw2: $finished = true; goto C06wM; VXPxU: $db_name = trim($_POST["\x6e\x61\155\x65"]); goto Cm1QF; c0vAi: function we7_error($num, $message = "\x73\165\143\x63\145\x73\x73") { $num = intval($num); return json_encode(array("\x65\162\162\x6e\157" => $num, "\x64\141\x74\x61" => $message)); } goto ERdeB; uHuSJ: require IA_INSTALL_ROOT . "\57\146\x72\x61\x6d\145\x77\x6f\x72\x6b\57\x62\157\157\164\163\x74\162\141\160\x2e\x69\x6e\x63\56\x70\x68\x70"; goto bcAEX; npaAF: $url = $siteroot . "\x2f\x69\x6e\163\164\141\154\x6c\x2e\x70\150\x70\x3f\x73\164\145\160\75\157\x61\165\164\x68"; goto aR9_b; aMCrz: $database_result = we7_build_config($server, $db_username, $db_password, $db_name, $db_prefix); goto CbduA; JEz4T: if (!(is_array($data) && isset($data["\x65\162\162\x6f\162"]))) { goto s4mbv; } goto eoZU9; MvqNC: exit(we7_error(400, "\344\xbf\xae\xe6\x94\271\xe7\253\x99\xe7\202\xb9\345\x90\215\347\xa7\260\345\xa4\xb1\350\xb4\245\x2e")); goto rOdo5; aR9_b: $callback = urlencode($url); goto EzjRk; X40i4: exit(we7_error(400, "\350\216\xb7\xe5\x8f\226\x61\x63\143\145\163\163\x74\x6f\x6b\x65\x6e\xe5\xa4\261\350\xb4\245\xef\xbc\214\350\xaf\xb7\351\x87\215\346\x96\260\347\x99\xbb\345\xbd\x95\x2e")); goto joYMD; awk8V: if (!($handle_result !== true)) { goto EbIc8; } goto paWLN; mpVl2: set_time_limit(0); goto ryAAB; g98wZ: goto gpiwX; goto IqYpF; BnKIF: we7_setcookie("\x61\x63\x63\x65\163\x73\164\x6f\153\145\156", $data); goto n5FPd; WkbcB: if (!($username != "\141\144\x6d\151\156" || $password != "\x31\x32\x33\64\x35\66")) { goto y39Hu; } goto KCv1W; Kvpr6: hZmaW: goto WgZXt; ZXSa9: function we7_register_site() { goto mp0hn; CX5TZ: return true; goto JQ5Gs; pHKQM: $version = IMS_VERSION; goto io1XM; io1XM: $release = IMS_RELEASE_DATE; goto twQmn; oIf7q: define("\x49\116\x5f\x49\101", true); goto QuSCN; QuSCN: require IA_INSTALL_ROOT . "\x2f\x66\162\x61\x6d\145\x77\157\162\153\x2f\166\x65\x72\163\151\157\156\56\x69\156\x63\56\160\150\160"; goto pHKQM; twQmn: $callback = urlencode($siteroot . "\57\151\156\163\x74\141\x6c\154\56\160\150\160\x3f\x73\164\x65\x70\x3d\162\145\147\x69\x73\164\145\162\x5f\143\x61\154\154\x62\141\143\x6b"); goto KFcwz; zThoc: $data = we7_request_api(API_OAUTH_REGISTER_SITE, $post); goto bnmlK; bnmlK: if (is_array($data) && isset($data["\x65\x72\162\x6f\162"])) { goto EfE2z; } goto CX5TZ; PPNT3: return $data["\x65\162\x72\x6f\x72"]; goto HYgoU; HYgoU: N6jyo: goto Clc72; HgHQ_: EfE2z: goto PPNT3; KFcwz: $post = array("\141\x63\143\x65\163\163\137\x74\157\153\x65\156" => $accesstoken, "\x6e\x61\x6d\x65" => $siteroot . "\xe7\x9a\x84\347\xab\x99\xe7\x82\xb9", "\x75\162\154" => $siteroot, "\x76\145\x72\163\x69\157\156" => $version, "\x72\x65\x6c\145\x61\x73\145" => $release, "\143\x61\x6c\154\x62\141\x63\x6b" => $callback); goto zThoc; JQ5Gs: goto N6jyo; goto HgHQ_; mp0hn: global $siteroot, $accesstoken; goto oIf7q; Clc72: } goto oSA0L; DILTl: vJo8Q: goto MGdxD; V0TVr: $ret["\146\x6f\160\x65\156"]["\x6e\x61\155\x65"] = "\146\157\x70\145\156"; goto mQhKo; nHUVf: if (empty($result)) { goto oxOzW; } goto fPZRP; CUGN2: define("\101\120\x49\x5f\117\101\125\x54\x48\137\122\x45\107\111\x53\x54\x45\122\137\x53\x49\x54\105", API_HOST . "\x2f\163\x69\164\145\x2f\162\145\x67\x69\163\x74\145\x72\x2f\151\156\144\x65\x78"); goto tGt3l; viwF2: $result = file_put_contents("\56\57\x63\x68\165\156\x6b\137" . $chunk_num, $data); goto PXGLc; mUKPg: goto xP2Ww; goto NUbZv; N7QwO: $ret["\165\x70\154\157\141\x64"]["\x72\x65\163\165\154\164"] = $server["\165\x70\x6c\x6f\141\144"]; goto hD2Xr; lyCG4: if (!(is_array($data) && isset($data["\x65\162\162\x6f\x72"]))) { goto GQLWq; } goto X40i4; zsrZ7: $is_https = $_SERVER["\x53\105\122\126\x45\x52\x5f\x50\x4f\x52\x54"] == 443 || isset($_SERVER["\x48\x54\124\120\123"]) && strtolower($_SERVER["\110\124\x54\120\123"]) != "\x6f\x66\146" || strtolower($_SERVER["\x48\124\124\x50\x5f\x58\x5f\106\117\x52\127\x41\122\x44\105\x44\x5f\x50\122\117\x54\117"]) == "\x68\x74\164\160\x73" || strtolower($_SERVER["\x48\124\x54\x50\x5f\x58\137\x43\114\111\105\x4e\124\137\123\x43\x48\105\115\x45"]) == "\150\164\x74\x70\x73" ? true : false; goto gn6iD; SrdvD: foreach ($ret as $key => $value) { goto RtGe4; TrKMM: goto Bsvqm; goto TA9IQ; adMQr: $result[] = $value; goto egvmQ; Qvod9: if (!$value["\146\141\x69\x6c\145\144"]) { goto KxKhW; } goto jO4pW; t8Qt0: Bsvqm: goto JiERo; TA9IQ: EyDUW: goto Qvod9; jO4pW: $value["\150\141\156\x64\154\x65"] = "\150\164\x74\x70\x73\x3a\x2f\57\142\142\x73\x2e\x77\145\x37\56\x63\x63\57\164\x68\162\145\141\x64\55\x33\65\66\64\x2d\x31\55\x31\56\150\164\x6d\x6c"; goto adMQr; egvmQ: KxKhW: goto t8Qt0; RtGe4: if (!(version_compare(PHP_VERSION, "\67\x2e\60\x2e\x30") >= 0 && in_array($key, array("\155\x63\162\x79\160\x74", "\x61\154\x77\x61\171\163\x5f\x70\x6f\x70\x75\154\141\x74\145\x5f\162\141\167\x5f\x70\157\x73\x74\x5f\x64\141\x74\141")))) { goto EyDUW; } goto TrKMM; JiERo: } goto IbuBG; zoIeO: HBYZ4: goto firc9; Xr5EK: if (!($action == "\x64\157\167\x6e\x6c\x6f\x61\144")) { goto HBYZ4; } goto Y952X; BORW3: we7_setcookie("\143\150\165\156\x6b\137\164\157\164\x61\154", $data["\x63\150\165\156\153\x5f\x74\157\164\x61\x6c"]); goto ZY7Gs; krNrW: if (!($action == "\154\157\147\x69\x6e")) { goto i0I0k; } goto PQVII; FU486: setting_save($site, "\163\151\x74\145"); goto NOP0X; vyAke: fNlrv: goto rd9Xl; MC5zH: if (file_exists(IA_INSTALL_ROOT . "\57\x63\x68\165\156\153\137" . $i)) { goto rdoY5; } goto SDpqR; C06wM: $i = 1; goto kWPqD; H7GWc: if (file_exists(IA_INSTALL_ROOT . "\57\144\141\164\x61\57\144\142\56\154\157\x63\153")) { goto huqpw; } goto ibEoF; cLvCn: $ret["\x61\x6c\x77\141\x79\163\137\160\x6f\160\x75\x6c\x61\164\145\x5f\x72\141\167\x5f\160\157\163\x74\137\144\x61\x74\x61"]["\162\x65\163\165\154\x74"] = @ini_get("\x61\154\x77\x61\171\163\137\160\x6f\160\165\154\x61\164\x65\137\162\x61\x77\x5f\x70\157\x73\164\137\x64\141\x74\x61"); goto kQukD; Z0Yph: E2kiY: goto krNrW; DsWmC: $action = in_array($action, $actions) ? $action : ''; goto uuEK2; firc9: if (!($action == "\151\x6e\x73\164\x61\x6c\154")) { goto E2kiY; } goto MgopJ; Tjv7G: exit(we7_error(420, $database_result)); goto knzlF; TCi_e: if ($user_result) { goto wm2cg; } goto TGmO4; qb9jr: BUNS5: goto J8Kj9; sjKdp: function we7_need_extension() { return array("\172\151\x70", "\160\x64\157", "\x70\144\157\x5f\x6d\x79\163\x71\154", "\157\x70\x65\156\x73\163\x6c", "\x67\x64", "\x6d\142\x73\164\x72\151\156\x67", "\155\x63\162\171\160\x74", "\143\x75\x72\154"); } goto SOlHy; d4mKi: $sitepath = str_replace("\x2f\151\156\x73\164\x61\154\x6c\x2e\x70\150\160", '', $sitepath); goto Vgev6; bbor7: exit(we7_error(400, $chunk_num)); goto Lnogo; mZYo2: $ret["\163\145\x73\x73\x69\157\x6e"]["\x66\x61\151\154\x65\144"] = true; goto jpoyk; zza2f: $ret["\x73\x65\x73\x73\151\157\156"]["\x6f\153"] = ini_get("\163\x65\163\163\151\x6f\156\56\141\165\164\x6f\x5f\x73\164\141\x72\x74"); goto VIfn1; Wg8SW: if (!($i <= $chunk_total)) { goto nFRjH; } goto MC5zH; UwT_1: $ret["\144\141\164\x61"]["\162\145\163\x75\154\x74"] = "\x64\x61\x74\141\xe7\233\xae\345\275\225\346\227\xa0\346\xb3\x95\xe5\206\x99\xe5\x85\xa5"; goto shjKq; cmzrk: exit(we7_error(0, "\163\x75\x63\x63\145\163\x73")); goto Z0Yph; ToZXQ: I6afZ: goto A98F0; NOP0X: exit(we7_error(0, "\x73\165\x63\x63\145\163\163")); goto OSCSq; agVr_: u00Me: goto F5IFO; joYMD: GQLWq: goto BnKIF; rd9Xl: $ret["\162\x6f\157\164"]["\x6f\x6b"] = local_writeable(IA_INSTALL_ROOT); goto mryOw; DalZl: if (is_array($data) && isset($data["\145\162\162\157\162"])) { goto hZmaW; } goto Dl5wh; SSb0a: if (!($action == "\143\150\x75\x6e\x6b\164\x6f\164\x61\x6c")) { goto Z0dE5; } goto pfLwl; egMNI: $dbfile = IA_INSTALL_ROOT . "\57\x64\141\164\x61\57\x64\x62\56\x70\x68\x70"; goto Ajpqi; eBxD6: define("\101\120\x49\x5f\x4f\x41\x55\x54\x48\137\x41\103\x43\x45\123\x53\124\x4f\113\x45\116", API_HOST . "\57\157\141\x75\x74\x68\x2f\141\x63\143\x65\x73\x73\55\164\x6f\153\145\156\57\143\x6f\x64\x65"); goto swfib; fQzsZ: if (!(empty($accesstoken) && $action != "\x72\145\147\151\163\x74\145\162\x5f\x63\x61\x6c\x6c\142\x61\143\x6b")) { goto fIvAB; } goto Cp7d3; uXFUH: $data = we7_request_api(API_GET_CHUNK_PACKAGE, $post); goto xi_yV; kmhZX: function local_run($sql, $link, $db) { goto KkZPM; RvzCj: Ygcvo: goto LJLuK; LHx31: unset($sql); goto mqLDm; MoBdD: $sql = str_replace("\15", "\12", str_replace("\40\x60\x69\x6d\163\137", "\40\x60" . $db["\x70\162\145\x66\151\x78"], $sql)); goto IAzXI; BIMud: $num = 0; goto Aetcj; ZaLzq: return; goto ZtAL0; ZtAL0: tFRgG: goto em0OV; Aetcj: foreach (explode("\x3b\12", trim($sql)) as $query) { goto UWjLy; oITjf: $num++; goto xN0L_; vKASz: KOnWb: goto oITjf; UWjLy: $ret[$num] = ''; goto EohGw; xN0L_: sdj4U: goto Magrz; EohGw: $queries = explode("\12", trim($query)); goto kK98u; kK98u: foreach ($queries as $query) { $ret[$num] .= isset($query[0]) && $query[0] == "\x23" || isset($query[1]) && isset($query[1]) && $query[0] . $query[1] == "\x2d\x2d" ? '' : $query; xE_21: } goto vKASz; Magrz: } goto lNNrV; IAzXI: $ret = array(); goto BIMud; KkZPM: if (!(!isset($sql) || empty($sql))) { goto tFRgG; } goto ZaLzq; lNNrV: ZUS5M: goto LHx31; mqLDm: foreach ($ret as $query) { goto eu926; fq955: if (!$query) { goto JvddD; } goto V7h55; pNxCH: exit($query); goto Uw2UQ; bBVLc: JvddD: goto oM6Cc; h1hwo: if (!($link->errorCode() != "\60\x30\x30\x30\x30")) { goto Dt2VJ; } goto sUaR_; oM6Cc: s8tgJ: goto wLwA7; eu926: $query = trim($query); goto fq955; sUaR_: $errorInfo = $link->errorInfo(); goto s19pL; Uw2UQ: Dt2VJ: goto bBVLc; V7h55: $link->exec($query); goto h1hwo; s19pL: echo $errorInfo[0] . "\72\40" . $errorInfo[2] . "\x3c\142\162\40\x2f\x3e"; goto pNxCH; wLwA7: } goto RvzCj; em0OV: $sql = str_replace("\xd", "\xa", str_replace("\x20\151\x6d\x73\x5f", "\x20" . $db["\160\x72\145\x66\151\x78"], $sql)); goto MoBdD; LJLuK: } goto b_AvC; Ypseu: function we7_request_api($url, $post = array()) { goto stR1q; K2EBg: if (is_array($result)) { goto nydIX; } goto hMEI8; Kt0wS: if (!($response["\x63\x6f\144\x65"] == 401)) { goto JC1Md; } goto YCwAy; hMEI8: return $response["\x63\x6f\x6e\x74\x65\x6e\164"]; goto EYqnL; YCwAy: return array("\145\162\162\157\x72" => 401); goto uJdFp; EYqnL: goto ORecw; goto NeBco; Qz5kW: return $result; goto sdAJ4; iZ2xp: $result = json_decode($response["\143\157\x6e\164\x65\x6e\x74"], true); goto K2EBg; NeBco: nydIX: goto Qz5kW; stR1q: $response = we7_http_request($url, $post); goto Kt0wS; sdAJ4: ORecw: goto Skudt; JdF1H: return array("\145\x72\x72\x6f\x72" => $response["\x63\x6f\156\x74\x65\x6e\164"]); goto GU2ph; uJdFp: JC1Md: goto TJH8R; GU2ph: BQczJ: goto iZ2xp; TJH8R: if (!($response["\143\157\x64\145"] != 200 || isset($response["\x65\x72\x72\156\157"]))) { goto BQczJ; } goto JdF1H; Skudt: } goto c0vAi; GzY6U: UpKxQ: goto H7GWc; amuF1: $ret["\144\x6f\x6d"]["\157\x6b"] = class_exists("\104\x4f\115\104\157\x63\165\x6d\x65\x6e\164"); goto JdkJs; Z9CE2: exit(we7_error(400, "\xe6\225\xb0\xe6\215\256\xe9\x94\x99\350\xaf\xaf\56")); goto Tw9pN; X7SAx: function we7_http_request($url, $post = array()) { goto i2IBQ; VbLS0: curl_setopt($ch, CURLOPT_USERAGENT, $_SERVER["\110\124\124\120\x5f\x55\x53\x45\x52\x5f\x41\107\x45\116\124"]); goto f3U4R; dFMuy: @curl_setopt($ch, CURLOPT_FOLLOWLOCATION, 1); goto pnTov; JXMO3: curl_setopt($ch, CURLOPT_POST, 1); goto Hu7Q3; i2IBQ: $ch = curl_init(); goto hV6zN; y9549: if (!$post) { goto mBsc0; } goto JXMO3; pnTov: curl_setopt($ch, CURLOPT_HEADER, 1); goto y9549; GtnS8: nnYod: goto iEa0S; p5TqF: if ($errno || empty($data)) { goto nnYod; } goto GBM7N; Qzinn: curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1); goto dFMuy; JSXSq: curl_setopt($ch, CURLOPT_TIMEOUT, 60); goto tWZGE; P8aDz: oOHyY: goto Li5SP; DqlDF: curl_close($ch); goto p5TqF; GBM7N: return we7_http_response_parse($data); goto atGYd; CBevA: curl_setopt($ch, CURLOPT_SSL_VERIFYHOST, 0); goto VbLS0; tWZGE: curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, false); goto CBevA; f3U4R: $data = curl_exec($ch); goto KISmf; KISmf: $errno = curl_errno($ch); goto gjQyM; W6TXw: mBsc0: goto HVWys; atGYd: goto oOHyY; goto GtnS8; HVWys: curl_setopt($ch, CURLOPT_CONNECTTIMEOUT, 60); goto JSXSq; hV6zN: curl_setopt($ch, CURLOPT_URL, $url); goto Qzinn; gjQyM: $error = curl_error($ch); goto DqlDF; iEa0S: return array("\x65\162\162\156\157" => $errno, "\145\162\x72\x6f\162" => $error); goto P8aDz; Hu7Q3: curl_setopt($ch, CURLOPT_POSTFIELDS, $post); goto W6TXw; Li5SP: } goto SiH6p; WSeZ9: touch(IA_INSTALL_ROOT . "\x2f\x64\x61\164\x61\x2f\151\156\x73\164\x61\154\154\x2e\154\157\143\x6b"); goto ieTB8; Dl5wh: we7_setcookie("\160\x61\143\153\x61\147\x65\x5f\155\x64\65", $data["\x6d\x64\x35"]); goto BORW3; rJDFF: gpiwX: goto cqqVD; O8w_d: $handle_result = we7_handle_chunk(); goto awk8V; QErCY: exit(we7_error(400, $data["\x65\x72\x72\x6f\162"])); goto g98wZ; kHvru: $ret["\x61\163\160\x5f\164\141\147\163"]["\x6e\141\x6d\145"] = "\x61\163\160\x5f\164\141\x67\x73"; goto GXqXx; Zo5Ok: if (!empty($chunk_total)) { goto BdRrd; } goto AjN9w; Te2HC: $ret["\166\x65\x72\x73\151\157\x6e"]["\x72\145\163\165\154\164"] = PHP_VERSION; goto nvcmQ; rOdo5: SPjFk: goto EoNDi; loxEJ: $verfile = IA_INSTALL_ROOT . "\x2f\x66\162\x61\x6d\x65\x77\x6f\x72\153\57\166\x65\162\x73\151\x6f\156\x2e\151\156\143\x2e\x70\x68\x70"; goto egMNI; S0x_8: ini_set("\144\151\x73\x70\154\141\171\x5f\145\162\162\157\x72\x73", 0); goto U5zeb; sR3HM: define("\x41\120\x49\x5f\110\117\x53\x54", "\150\164\x74\160\x3a\x2f\x2f\x61\160\151\x2e\167\x37\x2e\143\x63"); goto GYMbG; TGmO4: exit(we7_error(400, "\xe4\xbf\xae\xe6\x94\xb9\xe7\x94\xa8\346\210\267\xe5\220\x8d\345\257\x86\xe7\240\x81\345\xa4\xb1\xe8\264\xa5\x2e")); goto FVlZg; N8wrR: i0I0k: goto q9Jpu; tJdRg: fIvAB: goto zsrZ7; tGt3l: define("\x41\x50\111\137\x55\x50\104\101\124\x45\137\123\x49\124\105\116\101\115\x45", API_HOST . "\57\x73\x69\x74\145\57\x72\x65\x67\x69\163\x74\145\x72\57\x72\145\x6e\x61\155\x65"); goto nDHJU; dmFBf: $sitename_result = we7_update_sitename($sitename); goto syA7N; LSiMI: exit(we7_error(433, "\141\x63\143\145\163\x73\164\157\x6b\145\x6e\40\x65\x78\x70\151\x72\145\144\x2e")); goto rJDFF; pUSQX: Z0dE5: goto Xr5EK; Qwm6Z: exit(we7_error(421, "\345\xae\211\350\243\x85\xe5\214\x85\344\270\x8d\345\xae\214\346\x95\264\x2e")); goto GzY6U; H4oXz: $server["\x75\x70\154\157\141\x64"] = @ini_get("\x66\x69\154\x65\137\x75\160\x6c\157\141\144\163") ? ini_get("\165\x70\154\157\141\144\x5f\x6d\x61\x78\x5f\x66\x69\x6c\145\x73\x69\172\x65") : "\165\156\153\x6e\157\x77"; goto bFk0p; Y3Ddt: header("\114\157\x63\141\x74\151\x6f\x6e\x3a\x20" . $forward); goto QBs03; eeqOZ: exit(we7_error(419, $database_result)); goto qb9jr; mQhKo: $ret["\146\x6f\160\145\x6e"]["\x72\x65\x73\165\154\164"] = "\xe4\xb8\215\xe6\x94\257\xe6\x8c\x81\x66\157\x70\145\x6e"; goto maRVm; ccJ2g: function we7_getcookie($key) { goto ePMt8; VQBU5: return ''; goto OMMh7; ePMt8: if (!empty($key)) { goto wWpry; } goto VQBU5; OMMh7: wWpry: goto yKBdG; RspxP: return $_COOKIE[$key]; goto L2I2f; yKBdG: $key = COOKIE_PRE . $key; goto RspxP; L2I2f: }